# Trial and Error ê¸°ë¡

ì´ ë¬¸ì„œëŠ” nixos-config ì €ì¥ì†Œì—ì„œ ì‹œë„í–ˆë‹¤ê°€ ì‹¤íŒ¨í•œ ì‘ì—…ë“¤ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

## ëª©ì°¨

- [2026-02-13: Codex CLI + Termius ìŠ¤í¬ë¡¤ íˆìŠ¤í† ë¦¬ ì†Œì‹¤ (SSH)](#2026-02-13-codex-cli--termius-ìŠ¤í¬ë¡¤-íˆìŠ¤í† ë¦¬-ì†Œì‹¤-ssh)
- [2026-01-28: OSC 52 í´ë¦½ë³´ë“œ - Termius iOS ë¯¸ì§€ì›](#2026-01-28-osc-52-í´ë¦½ë³´ë“œ---termius-ios-ë¯¸ì§€ì›)
- [2026-01-18: Termius í•œêµ­ì–´ ì…ë ¥ ì‹œ í„°ë¯¸ë„ UI ê¹¨ì§ ë¬¸ì œ](#2026-01-18-termius-í•œêµ­ì–´-ì…ë ¥-ì‹œ-í„°ë¯¸ë„-ui-ê¹¨ì§-ë¬¸ì œ)
- [2026-01-17: rip (í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ CLI) Flake input ì¶”ê°€ ì‹¤íŒ¨](#2026-01-17-rip-í”„ë¡œì„¸ìŠ¤-ì¢…ë£Œ-cli-flake-input-ì¶”ê°€-ì‹¤íŒ¨)
  - [í›„ì† ë¬¸ì œ: nix flake updateë¡œ ì˜ë„ì¹˜ ì•Šì€ ì „ì²´ ì—…ë°ì´íŠ¸](#í›„ì†-ë¬¸ì œ-nix-flake-updateë¡œ-ì˜ë„ì¹˜-ì•Šì€-ì „ì²´-ì—…ë°ì´íŠ¸)
- [2026-01-13: Atuin ë™ê¸°í™” ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬í˜„ ì‹œí–‰ì°©ì˜¤](#2026-01-13-atuin-ë™ê¸°í™”-ëª¨ë‹ˆí„°ë§-ì‹œìŠ¤í…œ-êµ¬í˜„-ì‹œí–‰ì°©ì˜¤)
- [2026-01-13: Atuin ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨](#2026-01-13-atuin-ê³„ì •-ë§ˆì´ê·¸ë ˆì´ì…˜-ì‹¤íŒ¨)
- [2026-01-11: Claude Code ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ í•´ê²°](#2026-01-11-claude-code-ìœ ë ¹-í”ŒëŸ¬ê·¸ì¸-í•´ê²°)
- [2026-01-10: cat â†’ bat alias ì œê±° (í˜¸í™˜ì„± ë¬¸ì œ)](#2026-01-10-cat--bat-alias-ì œê±°-í˜¸í™˜ì„±-ë¬¸ì œ)
- [2026-01-10: VS Code customLabelsì—ì„œ ë™ì  ì•± ì´ë¦„ ì¶”ì¶œ ì‹¤íŒ¨](#2026-01-10-vs-code-customlabelsì—ì„œ-ë™ì -ì•±-ì´ë¦„-ì¶”ì¶œ-ì‹¤íŒ¨)
- [2024-12-25: dutië¡œ .html/.htm ê¸°ë³¸ ì•± ì„¤ì • ì‹¤íŒ¨](#2024-12-25-dutië¡œ-htmlhtm-ê¸°ë³¸-ì•±-ì„¤ì •-ì‹¤íŒ¨)
- [2024-12-24: Anki ì• ë“œì˜¨ Nix ì„ ì–¸ì  ê´€ë¦¬ ì‹œë„ (ë³´ë¥˜)](#2024-12-24-anki-ì• ë“œì˜¨-nix-ì„ ì–¸ì -ê´€ë¦¬-ì‹œë„-ë³´ë¥˜)
  - [ëª©í‘œ](#ëª©í‘œ)
  - [ì‹œë„í•œ ë°©ì‹ë“¤](#ì‹œë„í•œ-ë°©ì‹ë“¤)
    - [ë°©ì‹ 1: AnkiWeb ì§ì ‘ ë‹¤ìš´ë¡œë“œ (ì‹¤íŒ¨)](#ë°©ì‹-1-ankiweb-ì§ì ‘-ë‹¤ìš´ë¡œë“œ-ì‹¤íŒ¨)
    - [ë°©ì‹ 2: ë¡œì»¬ ì†ŒìŠ¤ íŒ¨í‚¤ì§• (ë°˜ë ¤)](#ë°©ì‹-2-ë¡œì»¬-ì†ŒìŠ¤-íŒ¨í‚¤ì§•-ë°˜ë ¤)
    - [ë°©ì‹ 3: GitHub ì €ì¥ì†Œ í™œìš© (ë³´ë¥˜)](#ë°©ì‹-3-github-ì €ì¥ì†Œ-í™œìš©-ë³´ë¥˜)
  - [ë°©ì‹ 3ì˜ ì‹¤íŒ¨ ì›ì¸](#ë°©ì‹-3ì˜-ì‹¤íŒ¨-ì›ì¸)
  - [êµí›ˆ](#êµí›ˆ)
  - [ëŒ€ìƒ ì• ë“œì˜¨ ëª©ë¡ (ì°¸ê³ ìš©)](#ëŒ€ìƒ-ì• ë“œì˜¨-ëª©ë¡-ì°¸ê³ ìš©)
  - [ê²°ë¡ ](#ê²°ë¡ )

---

## 2026-02-13: Codex CLI + Termius ìŠ¤í¬ë¡¤ íˆìŠ¤í† ë¦¬ ì†Œì‹¤ (SSH)

> **í™˜ê²½**:
> - **ì„œë²„**: NixOS miniPC
> - **í´ë¼ì´ì–¸íŠ¸**: Termius (iOS)
> - **ì—°ê²° ë°©ì‹**: SSH ì „ìš© (Mosh ë¯¸ì‚¬ìš©)
> - **ë¹„êµ ëŒ€ìƒ**: Claude Code vs Codex CLI
> - **í…ŒìŠ¤íŠ¸ ë²„ì „**: codex-cli 0.101.0, 0.96.0

### ë¬¸ì œ í˜„ìƒ

Termiusì—ì„œ Codex CLI ì‚¬ìš© ì‹œ:
1. ì‘ë‹µì´ ëë‚œ ë’¤ì—ë„ ì´ì „ ì¶œë ¥ìœ¼ë¡œ ìŠ¤í¬ë¡¤ì´ ì˜¬ë¼ê°€ì§€ ì•ŠìŒ
2. ìŠ¤í¬ë¡¤ íˆìŠ¤í† ë¦¬ê°€ ì‚¬ë¼ì§„ ê²ƒì²˜ëŸ¼ ë³´ì„ (í˜„ì¬ viewport ì¤‘ì‹¬ìœ¼ë¡œë§Œ ë³´ì„)
3. ë™ì¼ SSH í™˜ê²½ì—ì„œ Claude CodeëŠ” ì¶œë ¥ ì™„ë£Œ í›„ ìŠ¤í¬ë¡¤ ë³µêµ¬ë˜ëŠ” ê²½ìš°ê°€ ìˆìŒ

### ì‹œë„í•œ ë°©ë²•ë“¤

#### 1. `--no-alt-screen` ê°•ì œ ì ìš©

**ë³€ê²½ ë‚´ìš©** (`modules/shared/programs/shell/default.nix`):
```nix
codex = "command codex --dangerously-bypass-approvals-and-sandbox --no-alt-screen";
```

**ì ìš©**: `./modules/nixos/scripts/nrs.sh` build + switch ì„±ê³µ  
**ê²€ì¦**: `zsh -ic 'alias codex'`ì—ì„œ ì˜µì…˜ ë°˜ì˜ í™•ì¸  
**ê²°ê³¼**: âŒ Termiusì—ì„œ ìŠ¤í¬ë¡¤ ë¬¸ì œ ì§€ì†

#### 2. Codex êµ¬ë²„ì „ íšŒê·€ í…ŒìŠ¤íŠ¸ (0.96.0)

**ë°©ë²•**:
1. `~/.local/bin/codex-0.96.0`ë¡œ ì„ì‹œ ë°”ì´ë„ˆë¦¬ ì„¤ì¹˜
2. `codex-0.96.0 -V` í™•ì¸ í›„ ë™ì¼ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
3. í…ŒìŠ¤íŠ¸ ì¢…ë£Œ í›„ ë°”ì´ë„ˆë¦¬ ì‚­ì œ

**ê²°ê³¼**: âŒ 0.96.0ì—ì„œë„ ë™ì¼ ì¦ìƒ ì¬í˜„

### ê²°ë¡ 

1. **ì´ ë¬¸ì œëŠ” Mosh ë•Œë¬¸ì´ ì•„ë‹˜** (SSH-onlyì—ì„œë„ ì¬í˜„)
2. **`--no-alt-screen`ë§Œìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•ŠìŒ**
3. **í•´ë‹¹ í™˜ê²½ì—ì„œëŠ” ë²„ì „ ë‹¤ìš´ê·¸ë ˆì´ë“œ(0.96.0)ë„ íš¨ê³¼ ì—†ìŒ**
4. ì‹¤ì§ˆì ìœ¼ë¡œëŠ” **Termius + Codex TUI ë Œë”ë§/ìŠ¤í¬ë¡¤ ì²˜ë¦¬ í˜¸í™˜ì„± ì´ìŠˆ**ë¡œ ë³´ëŠ” ê²ƒì´ íƒ€ë‹¹

### ì¬ì‹œë„ ê¸ˆì§€ í•­ëª© (ê°™ì€ ì‚½ì§ˆ ë°©ì§€)

ë‹¤ìŒ í•­ëª©ì€ ì´ë²ˆ ì¼€ì´ìŠ¤ì—ì„œ íš¨ê³¼ ì—†ì—ˆìœ¼ë¯€ë¡œ ë™ì¼ ì¦ìƒ ì¬ë°œ ì‹œ ìš°ì„ ìˆœìœ„ì—ì„œ ì œì™¸:
1. Codex ë²„ì „ë§Œ ë‚®ì¶°ì„œ í•´ê²° ê¸°ëŒ€
2. `--no-alt-screen`ë§Œ ë„£ìœ¼ë©´ ìë™ í•´ê²°ë  ê²ƒì´ë¼ëŠ” ê°€ì •
3. Mosh/locale/zsh í”ŒëŸ¬ê·¸ì¸ ë¬¸ì œë¡œ ë‹¤ì‹œ ì—­ì¶”ì 

### ì„ì‹œ ìš°íšŒ

1. ê¸´ ì¶œë ¥ í™•ì¸ì´ ì¤‘ìš”í•  ë•ŒëŠ” `codex exec` ìš°ì„  ì‚¬ìš©
2. TUI ì‚¬ìš© ì¤‘ ì¶œë ¥ ëˆ„ë½/ìŠ¤í¬ë¡¤ ë¶ˆê°€ ì‹œ `/resume`ìœ¼ë¡œ ì¬í‘œì‹œ ì‹œë„
3. ê°€ëŠ¥í•˜ë©´ ë°ìŠ¤í¬í†± í„°ë¯¸ë„ì—ì„œ ë™ì¼ ì„¸ì…˜ í™•ì¸

### ê´€ë ¨ ì´ìŠˆ/ì°¸ê³  ìë£Œ

- [Codex Issue #11014: iOS SSH clientì—ì„œ ìŠ¤í¬ë¡¤ ê¹¨ì§](https://github.com/openai/codex/issues/11014)
- [Codex Issue #10726: 0.97+ ìŠ¤í¬ë¡¤ íšŒê·€](https://github.com/openai/codex/issues/10726)
- [Codex Issue #10901: TUI ì¶œë ¥ ì•ë¶€ë¶„ ì†Œì‹¤/ì˜ë¦¼](https://github.com/openai/codex/issues/10901)

---

## 2026-01-28: OSC 52 í´ë¦½ë³´ë“œ - Termius iOS ë¯¸ì§€ì›

> **í™˜ê²½**:
> - **miniPC OS**: NixOS 26.05 (nixos-unstable)
> - **í´ë¼ì´ì–¸íŠ¸**: iPhone (Termius), MacBook Pro (Ghostty)
> - **ëª©í‘œ**: SSH ì„¸ì…˜ì—ì„œ `pbcopy`/`xclip` ëª…ë ¹ìœ¼ë¡œ ë¡œì»¬ í´ë¦½ë³´ë“œì— ë³µì‚¬

### ë°°ê²½

ë¯¸ë‹ˆPCëŠ” headless NixOS ì„œë²„ë¼ì„œ X11/Waylandê°€ ì—†ì–´ ì‹¤ì œ xclip/wl-copyê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ.
SSH ì„¸ì…˜ì—ì„œ í´ë¦½ë³´ë“œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ **OSC 52 escape sequence**ê°€ ìœ ì¼í•œ ë°©ë²•.

### ì‹œë„í•œ ê²ƒ

1. **zsh í•¨ìˆ˜ë¡œ pbcopy/xclip/wl-copy ì˜¤ë²„ë¼ì´ë“œ**
   - SSH ì„¸ì…˜ì—ì„œë§Œ í™œì„±í™”ë˜ë„ë¡ `$SSH_TTY` ì²´í¬
   - tmux ë‚´ë¶€ì—ì„œëŠ” DCS passthrough ì‚¬ìš©
   - tmux.confì— `allow-passthrough on` ì¶”ê°€

2. **ì‹¤ì œ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ë¡œ ë³€ê²½**
   - Claude Code `/copy` ëª…ë ¹ì´ zsh í•¨ìˆ˜ë¥¼ ì¸ì‹ ëª»í•¨
   - `~/.local/bin/pbcopy`, `xclip`, `wl-copy`ë¡œ ìŠ¤í¬ë¦½íŠ¸ ì„¤ì¹˜
   - ì´í›„ `/copy` ëª…ë ¹ì€ ì‘ë™í•¨

### ê²°ê³¼

- **Mac Ghostty**: OSC 52 ì§€ì› â†’ **ì„±ê³µ**
- **iPhone Termius**: OSC 52 ë¯¸ì§€ì› â†’ **ì‹¤íŒ¨**

### êµí›ˆ

1. **í„°ë¯¸ë„ ì•±ì˜ OSC 52 ì§€ì› ì—¬ë¶€ ë¨¼ì € í™•ì¸**
   - Ghostty, iTerm2, Kitty: ì§€ì›
   - Termius: **ë¯¸ì§€ì›**
   - Blink Shell: ì§€ì› (ìœ ë£Œ)

2. **Termiusì˜ í•œê³„**
   - ì´ë¯¸ í•œêµ­ì–´ ì…ë ¥ ë¬¸ì œë„ ìˆì—ˆìŒ (2026-01-18 ê¸°ë¡ ì°¸ì¡°)
   - OSC 52 ë¯¸ì§€ì›ìœ¼ë¡œ í´ë¦½ë³´ë“œ ì—°ë™ë„ ë¶ˆê°€
   - iOSì—ì„œ SSH í´ë¼ì´ì–¸íŠ¸ë¡œ Termius ëŒ€ì‹  **Blink Shell** ê³ ë ¤ í•„ìš”

3. **headless ì„œë²„ í´ë¦½ë³´ë“œì˜ ê·¼ë³¸ì  í•œê³„**
   - ì„œë²„ ì¸¡ì—ì„œ í•  ìˆ˜ ìˆëŠ” ê±´ OSC 52 ì „ì†¡ë¿
   - í´ë¼ì´ì–¸íŠ¸(í„°ë¯¸ë„ ì•±)ê°€ ì§€ì›í•˜ì§€ ì•Šìœ¼ë©´ ë°©ë²• ì—†ìŒ

### ëŒ€ì•ˆ

- **Blink Shell** (iOS, $19.99) - OSC 52 ì§€ì› í™•ì¸ë¨
- **Secure ShellFish** (iOS) - ì§€ì› ì—¬ë¶€ ë¯¸í™•ì¸
- ë‹¹ë¶„ê°„ iPhoneì—ì„œëŠ” ìˆ˜ë™ ë³µì‚¬ (í…ìŠ¤íŠ¸ ì„ íƒ â†’ ë³µì‚¬)

---

## 2026-01-18: Termius í•œêµ­ì–´ ì…ë ¥ ì‹œ í„°ë¯¸ë„ UI ê¹¨ì§ ë¬¸ì œ

> **í™˜ê²½**:
> - **miniPC OS**: NixOS 24.11 (nixos-unstable-small)
> - **í´ë¼ì´ì–¸íŠ¸**: iPhone 16 Pro (iOS 18.2.1), MacBook Pro M3 Max (macOS 15.2)
> - **Termius ë²„ì „**: iOS 9.2.1 (9020001), Mac 9.2.1
> - **Tailscale ë²„ì „**: iOS 1.80.3, miniPC 1.78.1
> - **ì—°ê²° ë°©ì‹**: SSH ë° Mosh (Tailscale VPN ê²½ìœ )
> - **Shell**: zsh + Starship + Atuin + zsh-autosuggestion + zsh-syntax-highlighting

### ë¬¸ì œ í˜„ìƒ

iPhone/Mac Termiusì—ì„œ miniPCë¡œ SSH/Mosh ì ‘ì† ì‹œ:
1. **í•œêµ­ì–´ ì…ë ¥ ì‹œ í„°ë¯¸ë„ UI ê¹¨ì§** - ì»¤ì„œ ìœ„ì¹˜ê°€ ì–´ê¸‹ë‚¨
2. **Starship í”„ë¡¬í”„íŠ¸ê°€ ì—‰ëš±í•œ ìœ„ì¹˜ì— ë Œë”ë§**ë¨
3. **Backspaceë¡œ ì‚­ì œí•˜ë©´ ì•ˆ ë˜ëŠ” ë¬¸ì**(â¯ ë“±)ë„ ì‚­ì œë¨
4. ì˜ì–´ ì…ë ¥ì€ ì •ìƒ, **í•œêµ­ì–´ ì…ë ¥ë§Œ ë¬¸ì œ**

ì°¸ê³ : Mac Ghostty í„°ë¯¸ë„ì—ì„œëŠ” ë™ì¼ í™˜ê²½ì—ì„œ í•œêµ­ì–´ ì…ë ¥ì´ ì •ìƒ ì‘ë™í•¨.

### ì‹œë„í•œ ë°©ë²•ë“¤ (ëª¨ë‘ ì‹¤íŒ¨)

#### 1. locale ì˜ì–´ë¡œ ë³€ê²½

**ê°€ì„¤**: í•œêµ­ì–´ locale(`ko_KR.UTF-8`)ì´ ë¬¸ì œì¼ ìˆ˜ ìˆìŒ

**ë³€ê²½ ë‚´ìš©** (`modules/nixos/configuration.nix`):
```nix
# Before
i18n.defaultLocale = "ko_KR.UTF-8";
i18n.extraLocaleSettings = {
  LC_TIME = "ko_KR.UTF-8";
};

# After
i18n.defaultLocale = "en_US.UTF-8";
# extraLocaleSettings ì œê±°
```

**ê²°ê³¼**: âŒ CLI ë©”ì‹œì§€ê°€ ì˜ì–´ë¡œ ë°”ë€Œì—ˆì§€ë§Œ, í•œêµ­ì–´ ì…ë ¥ ë¬¸ì œëŠ” ê·¸ëŒ€ë¡œ

**ìœ ì§€**: localeì€ ì˜ì–´ë¡œ ìœ ì§€ (ì‚¬ìš©ì ì„ í˜¸)

#### 2. zsh COMBINING_CHARS ì˜µì…˜ ì¶”ê°€

**ê°€ì„¤**: macOSì—ë§Œ ìˆëŠ” `setopt COMBINING_CHARS`ê°€ NixOSì— ì—†ì–´ì„œ ìœ ë‹ˆì½”ë“œ ì²˜ë¦¬ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ

**ë³€ê²½ ë‚´ìš©** (`modules/shared/programs/shell/nixos.nix`):
```nix
programs.zsh.initContent = lib.mkMerge [
  (lib.mkBefore ''
    # ìœ ë‹ˆì½”ë“œ ê²°í•© ë¬¸ì ì²˜ë¦¬ (wide character ì§€ì›)
    setopt COMBINING_CHARS
  '')
];
```

**ê²°ê³¼**: âŒ íš¨ê³¼ ì—†ìŒ

**ìœ ì§€**: í•´ê°€ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ ì§€

#### 3. Starship ì´ëª¨ì§€ â†’ ASCII ëŒ€ì²´

**ê°€ì„¤**: Starship í”„ë¡¬í”„íŠ¸ì˜ wide character(ğŸŒ, â¯ ë“±)ê°€ í„°ë¯¸ë„ ì»¤ì„œ ìœ„ì¹˜ ê³„ì‚°ì„ ë°©í•´

**ë³€ê²½ ë‚´ìš©** (`modules/shared/programs/shell/default.nix`):
```nix
programs.starship.settings = {
  character = {
    success_symbol = "[>](bold green)";  # â¯ ëŒ€ì‹  >
    error_symbol = "[>](bold red)";
  };
  hostname = {
    ssh_symbol = "";
    format = "in [$hostname]($style) ";  # ğŸŒ ì œê±°
  };
  # ... ê¸°íƒ€ ì´ëª¨ì§€ ì œê±°
};
```

**ê²°ê³¼**: âŒ íš¨ê³¼ ì—†ìŒ

**ë¡¤ë°±**: ì´ëª¨ì§€ ì„¤ì • ì œê±°, ê¸°ë³¸ê°’ ë³µêµ¬

#### 4. Starship ì™„ì „ ë¹„í™œì„±í™”

**ê°€ì„¤**: Starship ìì²´ê°€ ë¬¸ì œì¼ ìˆ˜ ìˆìŒ

**ë³€ê²½ ë‚´ìš©**:
```nix
programs.starship.enable = lib.mkForce false;
```

**ê²°ê³¼**: âŒ ê¸°ë³¸ zsh í”„ë¡¬í”„íŠ¸ì—ì„œë„ ë™ì¼ ë¬¸ì œ ë°œìƒ

**ë¡¤ë°±**: Starship í™œì„±í™” ë³µêµ¬

#### 5. Atuin ë¹„í™œì„±í™”

**ê°€ì„¤**: Atuinì´ zle(Zsh Line Editor)ë¥¼ í›„í‚¹í•˜ì—¬ IMEì™€ ì¶©ëŒ

**ë³€ê²½ ë‚´ìš©**:
```nix
programs.atuin.enable = lib.mkForce false;
```

**ê²°ê³¼**: âŒ íš¨ê³¼ ì—†ìŒ

**ë¡¤ë°±**: Atuin í™œì„±í™” ë³µêµ¬

#### 6. zsh-syntax-highlighting ë¹„í™œì„±í™”

**ê°€ì„¤**: êµ¬ë¬¸ ê°•ì¡°ê°€ ì…ë ¥ ë²„í¼ë¥¼ ì¡°ì‘í•˜ì—¬ IMEì™€ ì¶©ëŒ

**ë³€ê²½ ë‚´ìš©**:
```nix
programs.zsh.syntaxHighlighting.enable = lib.mkForce false;
```

**ê²°ê³¼**: âŒ íš¨ê³¼ ì—†ìŒ

**ë¡¤ë°±**: í™œì„±í™” ë³µêµ¬

#### 7. zsh-autosuggestion ë¹„í™œì„±í™”

**ê°€ì„¤**: ìë™ ì™„ì„±ì´ ì…ë ¥ ë²„í¼ë¥¼ ì¡°ì‘í•˜ì—¬ IMEì™€ ì¶©ëŒ

**ë³€ê²½ ë‚´ìš©**:
```nix
programs.zsh.autosuggestion.enable = lib.mkForce false;
```

**ê²°ê³¼**: âŒ íš¨ê³¼ ì—†ìŒ (Atuin, syntax-highlightingê³¼ í•¨ê»˜ ëª¨ë‘ ë¹„í™œì„±í™”í•´ë„ ë™ì¼)

**ë¡¤ë°±**: í™œì„±í™” ë³µêµ¬

### ì¶”ê°€ ë°œê²¬ ì‚¬í•­

1. **Mac Termiusì—ì„œë„ ë™ì¼ ë¬¸ì œ ë°œìƒ**
   - iPhoneë§Œì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼ Termius ì•± ìì²´ì˜ ë¬¸ì œ
   - Macì—ì„œ í•˜ë“œì›¨ì–´ í‚¤ë³´ë“œë¡œ í•œêµ­ì–´ ì…ë ¥í•´ë„ ë™ì¼ ë¬¸ì œ ë°œìƒ

2. **Termius CJK ì„¤ì • í™•ì¸**
   - "CJK Input In Terminal" ì˜µì…˜ì´ ìˆì§€ë§Œ, ì´ë¥¼ í™œì„±í™”í•´ë„ **ë¬¸ì œ í•´ê²° ì•ˆ ë¨**
   - í•˜ë“œì›¨ì–´ í‚¤ë³´ë“œì—ì„œë„ ì†Œí”„íŠ¸ì›¨ì–´ í‚¤ë³´ë“œì™€ ë™ì¼í•œ ë¬¸ì œ ë°œìƒ

3. **IME ì¡°í•© ì°½(Pre-edit area) ë¯¸ì§€ì›**
   - Mac Ghostty: í•œê¸€ ì¡°í•© ì¤‘ì¸ ê¸€ìê°€ ë³„ë„ ì˜ì—­(pre-edit area)ì—ì„œ ì²˜ë¦¬ë¨
   - Termius: ì¡°í•© ì¤‘ì¸ ê¸€ìê°€ ë°”ë¡œ í„°ë¯¸ë„ì— ì „ì†¡ë˜ì–´ ì»¤ì„œ ìœ„ì¹˜ê°€ ì–´ê¸‹ë‚¨

### ê²°ë¡ 

**Termius ì•± ìì²´ê°€ í•œêµ­ì–´ IMEë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ëª»í•¨** (ì†Œí”„íŠ¸ì›¨ì–´/í•˜ë“œì›¨ì–´ í‚¤ë³´ë“œ ëª¨ë‘)

NixOS ì„¤ì •ìœ¼ë¡œëŠ” **í•´ê²° ë¶ˆê°€ëŠ¥**. Termius ì•±ì˜ ê·¼ë³¸ì ì¸ í•œê³„.

---

### ì„ì‹œ í•´ê²°ì±… (Workaround)

ì™„ì „í•œ í•´ê²°ì±…ì€ ì—†ì§€ë§Œ, ë‹¤ìŒ ë°©ë²•ìœ¼ë¡œ **ì‚¬ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€**ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŒ:

#### 1. í™”ë©´ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë Œë”ë§ ë³µêµ¬

**ë¬¸ì œ ìƒí™©**: í•œêµ­ì–´ ì…ë ¥/ì¶œë ¥ í›„ í„°ë¯¸ë„ í™”ë©´ì´ ê¹¨ì ¸ ë³´ì„ (ì»¤ì„œ ìœ„ì¹˜ ì˜¤ë¥˜, ê¸€ì ê²¹ì¹¨ ë“±)

**í•´ê²° ë°©ë²•**:
1. í™”ë©´ í•˜ë‹¨ ì¤‘ì•™-ì™¼ìª½ì˜ **`<` ë²„íŠ¼** íƒ­ (ì„¸ì…˜ ëª©ë¡ìœ¼ë¡œ ì´ë™)
2. ë‹¤ì‹œ í•´ë‹¹ ì„¸ì…˜ íƒ­í•˜ì—¬ ëŒì•„ì˜´
3. í™”ë©´ì´ **ì •ìƒì ìœ¼ë¡œ ë‹¤ì‹œ ë Œë”ë§**ë¨

**ì›ë¦¬**: ì„¸ì…˜ì—ì„œ ë‚˜ê°”ë‹¤ ëŒì•„ì˜¤ë©´ Termiusê°€ í„°ë¯¸ë„ í™”ë©´ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ê·¸ë¦¼

**ì ìš© ì‹œë‚˜ë¦¬ì˜¤**:
- Claude Code ë“±ì—ì„œ **í•œêµ­ì–´ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶œë ¥**ë  ë•Œ í™”ë©´ì´ ê¹¨ì§€ëŠ” ê²½ìš°
- í”„ë¡¬í”„íŠ¸ê°€ ì—‰ëš±í•œ ìœ„ì¹˜ì— í‘œì‹œë˜ëŠ” ê²½ìš°
- ë¬¸ìê°€ ê²¹ì³ ë³´ì´ê±°ë‚˜ ì»¤ì„œ ìœ„ì¹˜ê°€ ì´ìƒí•œ ê²½ìš°

#### 2. Termius Input ê¸°ëŠ¥ ì‚¬ìš© (í•œêµ­ì–´ ì…ë ¥ ì‹œ ê¶Œì¥)

**ë¬¸ì œ ìƒí™©**: í”„ë¡¬í”„íŠ¸ì— ì§ì ‘ í•œêµ­ì–´ë¥¼ ì…ë ¥í•˜ë©´ ì‹¤ì‹œê°„ìœ¼ë¡œ í™”ë©´ì´ ê¹¨ì§

**í•´ê²° ë°©ë²•**:
1. í‚¤ë³´ë“œ ìœ„ì˜ **í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ** (Termius Input) í™œìš©
   - "Use voice typing here..." ë¼ê³  í‘œì‹œëœ ì˜ì—­
2. ì´ ì˜ì—­ì—ì„œ í•œêµ­ì–´ë¥¼ **ì „ë¶€ ì‘ì„±**
3. ì˜¤ë¥¸ìª½ **íŒŒë€ìƒ‰ ì „ì†¡ ë²„íŠ¼(â†‘)** ë˜ëŠ” **ì—”í„°í‚¤** íƒ­
4. ì‘ì„±í•œ ë‚´ìš©ì´ **í•œ ë²ˆì— í”„ë¡¬í”„íŠ¸ì— ë¶™ì—¬ë„£ê¸°**ë¨

**ì¥ì **:
- í•œê¸€ ì¡°í•©ì´ **ì…ë ¥ í•„ë“œì—ì„œ ì™„ë£Œ**ëœ í›„ í„°ë¯¸ë„ì— ì „ì†¡ë¨
- ì‹¤ì‹œê°„ ì…ë ¥ì´ ì•„ë‹ˆë¯€ë¡œ ì»¤ì„œ ìœ„ì¹˜ ì˜¤ë¥˜ ë°©ì§€
- ì´ì „ ì…ë ¥ ë‚´ì—­ë„ í™•ì¸ ê°€ëŠ¥ (íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥)

**ë‹¨ì **:
- ì‹¤ì‹œê°„ íƒ€ì´í•‘ í”¼ë“œë°±ì´ ì—†ìŒ
- ê¸´ ëª…ë ¹ì–´ ì…ë ¥ ì‹œ ë¶ˆí¸í•  ìˆ˜ ìˆìŒ

#### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°€ì´ë“œ

| ì‹œë‚˜ë¦¬ì˜¤ | ê¶Œì¥ ë°©ë²• | ì„¤ëª… |
|----------|-----------|------|
| **ì˜ì–´ ëª…ë ¹ì–´ ì…ë ¥** | ì§ì ‘ ì…ë ¥ | ë¬¸ì œ ì—†ìŒ |
| **í•œêµ­ì–´ê°€ í¬í•¨ëœ ëª…ë ¹ì–´** | Termius Input ì‚¬ìš© | `echo "í•œê¸€"` ë“± |
| **Claude Code í”„ë¡¬í”„íŠ¸ ì…ë ¥** | Termius Input ì‚¬ìš© | í•œêµ­ì–´ ì§€ì‹œì‚¬í•­ ì…ë ¥ |
| **Claude Code í•œêµ­ì–´ ì¶œë ¥ í›„** | `<` ë²„íŠ¼ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨ | ì¶œë ¥ ì™„ë£Œ í›„ í™”ë©´ ë³µêµ¬ |
| **ì¼ë°˜ ì‘ì—… (ls, cd ë“±)** | ì§ì ‘ ì…ë ¥ | ì˜ì–´ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ |

#### í•œê³„

1. **ì‹¤ì‹œê°„ í•œêµ­ì–´ ì¶œë ¥**ì€ ì—¬ì „íˆ ê¹¨ì§
   - Claude Codeê°€ í•œêµ­ì–´ë¡œ ì‘ë‹µí•  ë•Œ í™”ë©´ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¹¨ì§
   - ì¶œë ¥ ì™„ë£Œ í›„ `<` ë²„íŠ¼ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨ í•„ìš”

2. **ì™„ë²½í•œ í•´ê²°ì±… ì•„ë‹˜**
   - ë§¤ë²ˆ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” ë¶ˆí¸í•¨ ì¡´ì¬
   - "ë°”ì´ë¸Œì½”ë”©" ê²½í—˜ì´ ë‹¤ì†Œ ì €í•˜ë¨

3. **Termius ì•± ì—…ë°ì´íŠ¸ í•„ìš”**
   - ê·¼ë³¸ì  í•´ê²°ì€ Termius ê°œë°œíŒ€ì˜ IME ì²˜ë¦¬ ê°œì„  í•„ìš”
   - ë²„ê·¸ ë¦¬í¬íŠ¸ ì œì¶œ ê¶Œì¥

---

### ëŒ€ì•ˆ ì•± (ë¯¸ê²€ì¦)

ë‹¤ìŒ ì•±ë“¤ì´ ëŒ€ì•ˆìœ¼ë¡œ ì–¸ê¸‰ë˜ì§€ë§Œ, **ì‹¤ì œ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë™ì¼í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ**:

| ì•± | ê°€ê²© | íŠ¹ì§• | ê²€ì¦ ì—¬ë¶€ |
|----|------|------|-----------|
| **Blink Shell** | $19.99 | Chromium HTerm ê¸°ë°˜, Mosh ë„¤ì´í‹°ë¸Œ ì§€ì› | â“ ë¯¸ê²€ì¦ |
| **Prompt 3** | $19.99 | Panic ê°œë°œ | â“ ë¯¸ê²€ì¦ |
| **ServerCat** | ë¬´ë£Œ/Pro | ì„œë²„ ëª¨ë‹ˆí„°ë§ + SSH | â“ ë¯¸ê²€ì¦ |

> **ì£¼ì˜**: ì¸í„°ë„·ì—ì„œ "ì¸ì½”ë”© ì²˜ë¦¬ ìš°ìˆ˜"ë¼ê³  ì–¸ê¸‰ë˜ë”ë¼ë„, í•œêµ­ì–´ IME ë¬¸ì œëŠ” ë³„ê°œì¼ ìˆ˜ ìˆìŒ.
> ìœ ë£Œ ì•± êµ¬ë§¤ ì „ ë¬´ë£Œ ì²´í—˜íŒì´ë‚˜ ë¦¬ë·°ë¥¼ í™•ì¸í•˜ê±°ë‚˜, ì§ì ‘ í•œêµ­ì–´ ì…ë ¥ í…ŒìŠ¤íŠ¸ í›„ ê²°ì • ê¶Œì¥.

### êµí›ˆ

1. **í„°ë¯¸ë„ ì•±ì˜ IME ì§€ì›ì€ ì•±ë§ˆë‹¤ ë‹¤ë¦„** - NixOS/zsh ì„¤ì •ê³¼ ë¬´ê´€í•  ìˆ˜ ìˆìŒ
2. **Macì—ì„œ ì •ìƒì´ë¼ê³  ë‹¤ë¥¸ ì•±ì—ì„œë„ ì •ìƒì¸ ê²ƒì€ ì•„ë‹˜** - ì•±ë³„ë¡œ í…ŒìŠ¤íŠ¸ í•„ìš”
3. **wide character ë¬¸ì œëŠ” ë³µì¡í•¨** - í„°ë¯¸ë„, shell, í”„ë¡¬í”„íŠ¸, IME ëª¨ë‘ ê´€ì—¬
4. **í•˜ë‚˜ì”© ë¹„í™œì„±í™”í•´ì„œ ì›ì¸ ê²©ë¦¬**í•˜ëŠ” ë°©ë²•ì´ ë””ë²„ê¹…ì— íš¨ê³¼ì 
5. **í•˜ë“œì›¨ì–´ í‚¤ë³´ë“œê°€ í•´ê²°ì±…ì´ ì•„ë‹ ìˆ˜ ìˆìŒ** - Termiusì˜ ê²½ìš° ì†Œí”„íŠ¸ì›¨ì–´/í•˜ë“œì›¨ì–´ ë¬´ê´€í•˜ê²Œ ë™ì¼ ë¬¸ì œ
6. **ì™„ë²½í•œ í•´ê²°ì´ ì—†ì„ ë•ŒëŠ” workaround ë¬¸ì„œí™”**ê°€ ì¤‘ìš”

### ê´€ë ¨ ì´ìŠˆ/ì°¸ê³  ìë£Œ

- [Starship Issue #6923: Unicode prompt cursor positioning](https://github.com/starship/starship/issues/6923)
- [Blink Shell Issue #524: Broken unicode with mosh](https://github.com/blinksh/blink/issues/524)
- [Termius iOS Changelog](https://termius.com/changelog/ios-changelog) - CJK hardware keyboard ì§€ì› ì–¸ê¸‰
- [React Native iOS 15+ CJK Issue](https://github.com/facebook/react-native/issues/32503)

---

## 2026-01-17: rip (í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ CLI) Flake input ì¶”ê°€ ì‹¤íŒ¨

> **í™˜ê²½**: nixpkgs nixos-unstable-small (2026-01-16), nix-darwin 26.05, macOS (Apple Silicon)
>
> [rip](https://github.com/cesarferreira/rip)ì€ í„°ë¯¸ë„ì—ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ í¼ì§€ ê²€ìƒ‰ìœ¼ë¡œ ì°¾ì•„ ì¢…ë£Œí•˜ëŠ” Rust CLI ë„êµ¬ì…ë‹ˆë‹¤.

### ëª©í‘œ

ripì„ Nix flake inputìœ¼ë¡œ ì¶”ê°€í•˜ì—¬ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë ¤ í–ˆìŠµë‹ˆë‹¤.

### ì‹œë„í•œ ë°©ì‹

**1ë‹¨ê³„: flake.nixì— input ì¶”ê°€**

```nix
# inputs ì„¹ì…˜
rip = {
  url = "github:cesarferreira/rip";
  inputs.nixpkgs.follows = "nixpkgs";  # nixpkgs ë²„ì „ í†µì¼
};

# specialArgsì— íŒ¨í‚¤ì§€ ì „ë‹¬
specialArgs = {
  # ...
  rip = inputs.rip.packages.${system}.default;
};
```

**2ë‹¨ê³„: home.nixì—ì„œ ì‚¬ìš©**

```nix
{ ..., rip, ... }:
# ...
home.packages = with pkgs; [ ... ] ++ [ rip ];
```

### ë°œìƒí•œ ì˜¤ë¥˜

```
error: darwin.apple_sdk_11_0 has been removed as it was a legacy compatibility stub;
see <https://nixos.org/manual/nixpkgs/stable/#sec-darwin-legacy-frameworks>
for migration instructions
```

### ì›ì¸ ë¶„ì„

1. **ripì˜ flake.nixê°€ ì œê±°ëœ API ì‚¬ìš©**: ripì€ macOS ë¹Œë“œ ì‹œ `darwin.apple_sdk.frameworks.{Security,SystemConfiguration}`ì„ ì‚¬ìš©í•˜ëŠ”ë°, ì´ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ `darwin.apple_sdk_11_0`ì„ ì°¸ì¡°í•¨

2. **ìµœì‹  nixpkgsì—ì„œ ì œê±°ë¨**: nixpkgs unstableì—ì„œ `darwin.apple_sdk_11_0`ì´ ì œê±°ë˜ê³  `darwin.apple_sdk`ë¡œ í†µí•©ë¨

3. **follows ì œê±°í•´ë„ ë™ì¼í•œ ë¬¸ì œ**: ripì˜ ìì²´ nixpkgsë„ ìµœì‹  ë²„ì „ì´ë¼ ê°™ì€ ì˜¤ë¥˜ ë°œìƒ

### ê°€ëŠ¥í–ˆë˜ ëŒ€ì•ˆë“¤

| ë°©ì‹ | ì¥ì  | ë‹¨ì  |
|------|------|------|
| **Overlayë¡œ ì§ì ‘ íŒ¨í‚¤ì§•** | Nix ìˆœìˆ˜ì„± ìœ ì§€, ìˆ˜ì •ëœ apple_sdk ì‚¬ìš© ê°€ëŠ¥ | ìœ ì§€ë³´ìˆ˜ í•„ìš”, rip ì—…ìŠ¤íŠ¸ë¦¼ ì¶”ì  ì–´ë ¤ì›€ |
| **Homebrewë¡œ ê´€ë¦¬** | ê°„ë‹¨, ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥ | Nix ìˆœìˆ˜ì„± ì €í•˜ |
| **rip í”„ë¡œì íŠ¸ì— PR** | ê·¼ë³¸ì  í•´ê²° | ì‹œê°„ ì†Œìš”, ë¨¸ì§€ ë¶ˆí™•ì‹¤ |

### êµí›ˆ

1. **ì™¸ë¶€ flakeë¥¼ inputìœ¼ë¡œ ì¶”ê°€í•  ë•ŒëŠ” ë¨¼ì € í˜¸í™˜ì„± í™•ì¸ í•„ìš”**
   - íŠ¹íˆ macOSì—ì„œ `darwin.apple_sdk` ê´€ë ¨ ì˜ì¡´ì„±ì´ ìˆëŠ” íŒ¨í‚¤ì§€ëŠ” ì£¼ì˜
   - `nix build github:owner/repo` ë“±ìœ¼ë¡œ ì‚¬ì „ í…ŒìŠ¤íŠ¸ ê¶Œì¥

2. **`inputs.nixpkgs.follows` ì„¤ì •ì˜ ì–‘ë©´ì„±**
   - ì¥ì : nixpkgs ë²„ì „ í†µì¼ë¡œ ë¹Œë“œ ìºì‹œ íš¨ìœ¨í™”
   - ë‹¨ì : ì™¸ë¶€ í”„ë¡œì íŠ¸ê°€ íŠ¹ì • nixpkgs ë²„ì „ì— ì˜ì¡´í•  ê²½ìš° í˜¸í™˜ì„± ê¹¨ì§

3. **nixpkgs ë³€ê²½ ì‚¬í•­ ì¶”ì  ì¤‘ìš”**
   - `darwin.apple_sdk_11_0` ì œê±°ëŠ” [nixpkgs#darwin-legacy-frameworks](https://nixos.org/manual/nixpkgs/stable/#sec-darwin-legacy-frameworks) ì°¸ê³ 
   - ë ˆê±°ì‹œ API ì œê±°ëŠ” ì ì§„ì ìœ¼ë¡œ ì§„í–‰ë˜ë¯€ë¡œ ì™¸ë¶€ í”„ë¡œì íŠ¸ê°€ ë’¤ì²˜ì§ˆ ìˆ˜ ìˆìŒ

4. **ëª¨ë“  ê²ƒì„ Nixë¡œ ê´€ë¦¬í•  í•„ìš”ëŠ” ì—†ìŒ**
   - Homebrewê°€ ë” ì í•©í•œ ê²½ìš°ë„ ìˆìŒ (íŠ¹íˆ ë¹ ë¥´ê²Œ ë³€í•˜ëŠ” CLI ë„êµ¬ë“¤)
   - "ì„ ì–¸ì  ê´€ë¦¬"ì™€ "ì‹¤ìš©ì„±" ì‚¬ì´ì˜ ê· í˜• í•„ìš”

### ê²°ë¡ 

ripì€ í˜„ì¬ ìµœì‹  nixpkgsì™€ í˜¸í™˜ë˜ì§€ ì•Šì•„ Nixë¡œ ê´€ë¦¬í•˜ì§€ ì•Šê¸°ë¡œ ê²°ì •. í•„ìš” ì‹œ Homebrew(`brew install cesarferreira/tap/rip`) ë˜ëŠ” Cargo(`cargo install rip-cli`)ë¡œ ì„¤ì¹˜.

### í›„ì† ë¬¸ì œ: nix flake updateë¡œ ì˜ë„ì¹˜ ì•Šì€ ì „ì²´ ì—…ë°ì´íŠ¸

#### ìƒí™©

- rip input ë¡¤ë°± ê³¼ì •ì—ì„œ `nix flake update` ì‹¤í–‰
- **ì˜ë„**: ripë§Œ ì œê±°
- **ê²°ê³¼**: 4ê°œ inputs ì „ë¶€ ì—…ë°ì´íŠ¸ (nixpkgs, home-manager, nix-darwin, nix-vscode-extensions)

#### ì›ì¸

- `nix flake update`ëŠ” **ëª¨ë“ ** inputsë¥¼ ìµœì‹ ìœ¼ë¡œ ê°±ì‹ í•˜ëŠ” ëª…ë ¹ì–´
- ripë§Œ ì œê±°í•˜ë ¤ë©´ ë‹¤ë¥¸ ë°©ë²•ì„ ì‚¬ìš©í–ˆì–´ì•¼ í•¨

#### ì˜¬ë°”ë¥¸ ë°©ë²•

**íŠ¹ì • inputë§Œ ì—…ë°ì´íŠ¸:**

```bash
nix flake update <input-name>              # Nix 2.19+
nix flake lock --update-input <input-name> # êµ¬ë²„ì „ í˜¸í™˜
```

**input ì œê±° (flake.nixì—ì„œ ì‚­ì œ í›„):**

```bash
nix flake lock  # updateê°€ ì•„ë‹˜! lockë§Œ ì¬ìƒì„±
```

#### nix-darwinì—ì„œ ë³€ê²½ì‚¬í•­ ë¯¸ë¦¬ í™•ì¸í•˜ëŠ” ë°©ë²•

```bash
# 1. ë¹Œë“œë§Œ ìˆ˜í–‰ (ì ìš© ì•ˆ í•¨)
darwin-rebuild build --flake .

# 2. nvdë¡œ ë¹„êµ (ê¶Œì¥)
nvd diff /run/current-system ./result

# 3. ìƒì„¸ ë¶„ì„ (í¬ê¸° í¬í•¨)
nix store diff-closures /run/current-system ./result
```

#### nvd vs nix store diff-closures ë¹„êµ

**nvd (nix-visualize-diff)** - ê¶Œì¥:

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | Nix closureì˜ íŒ¨í‚¤ì§€ ë²„ì „ ë³€ê²½ì„ ì‹œê°í™” |
| **ì„¤ì¹˜** | `pkgs.nvd` (nixpkgs í¬í•¨) |
| **ì¶œë ¥** | `[U*] firefox: 84.0.1 â†’ 84.0.2` í˜•ì‹, ìƒ‰ìƒ ê°•ì¡° |
| **ì¥ì ** | ì¸ê°„ ì¤‘ì‹¬ UX, í•µì‹¬ ë³€ê²½ë§Œ í‘œì‹œ, ê°€ë…ì„± ìš°ìˆ˜ |
| **ë‹¨ì ** | ì™¸ë¶€ ë„êµ¬ ì„¤ì¹˜ í•„ìš”, í¬ê¸° ì •ë³´ ì—†ìŒ |

**nix store diff-closures**:

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | ë‘ closure ê°„ ëª¨ë“  ì°¨ì´ í‘œì‹œ (í¬ê¸° í¬í•¨) |
| **ì„¤ì¹˜** | ë¶ˆí•„ìš” (Nix 2.4+ ê¸°ë³¸ ì œê³µ) |
| **ì¶œë ¥** | `dolphin: 20.08.1 â†’ 20.08.2, +13.9 KiB` |
| **ì¥ì ** | ê¸°ë³¸ ì œê³µ, ìƒì„¸ ì •ë³´, ìŠ¤í¬ë¦½íŒ… ì¹œí™”ì  |
| **ë‹¨ì ** | ì¥í™©í•œ ì¶œë ¥, ê°€ë…ì„± ë‚®ìŒ |

**ì¶”ì²œ**: ì¼ë°˜ ì‚¬ìš©ì€ nvd, ìƒì„¸ ë¶„ì„ì€ nix store diff-closures

#### êµí›ˆ

1. `nix flake update`ëŠ” **ëª¨ë“ ** inputsë¥¼ ìµœì‹ ìœ¼ë¡œ ê°±ì‹ 
2. íŠ¹ì • inputë§Œ ì¡°ì‘í•˜ë ¤ë©´ `nix flake lock` ë˜ëŠ” `nix flake update <name>` ì‚¬ìš©
3. ì—…ë°ì´íŠ¸ ì „ `darwin-rebuild build` + `nvd diff`ë¡œ ë³€ê²½ì‚¬í•­ ë¯¸ë¦¬ í™•ì¸
4. flake.lock ë³€ê²½ ì‹œ ì‚¬ìš©ì ë™ì˜ í•„ìˆ˜

> **ì°¸ê³ **: ì´ë²ˆ ì—…ë°ì´íŠ¸ëŠ” nvd ì„¤ì¹˜ ì „ì´ë¼ ì‚¬ì „ í™•ì¸ ì—†ì´ ì§„í–‰ë¨.
> nvdëŠ” ì´ë²ˆ ì»¤ë°‹ì—ì„œ ì¶”ê°€í•˜ì—¬ **ë‹¤ìŒ ì—…ë°ì´íŠ¸ë¶€í„°** í™œìš© ì˜ˆì •.

---

## 2026-01-13: Atuin ë™ê¸°í™” ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬í˜„ ì‹œí–‰ì°©ì˜¤

> **í…ŒìŠ¤íŠ¸ í™˜ê²½**: atuin 18.10.0, macOS (Apple Silicon)
>
> Atuin ë™ê¸°í™” ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ë©´ì„œ ë°œê²¬í•œ ì¤‘ìš”í•œ ì‚¬ì‹¤ë“¤ê³¼ ì‹œí–‰ì°©ì˜¤ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.

### ëª©í‘œ

1. Hammerspoon ë©”ë‰´ë°”ì— ğŸ¢ ì•„ì´ì½˜ìœ¼ë¡œ ë™ê¸°í™” ìƒíƒœ í‘œì‹œ
2. ë™ê¸°í™” ì§€ì—° ì‹œ ì•Œë¦¼ ì „ì†¡ (Pushover, macOS ì•Œë¦¼)
3. ì„¤ì •ê°’ ì¤‘ì•™ ê´€ë¦¬ (í•˜ë“œì½”ë”© ì œê±°)

### ì‹œí–‰ì°©ì˜¤ 1: `last_sync_time` íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

**ì´ˆê¸° êµ¬í˜„**: `~/.local/share/atuin/last_sync_time` íŒŒì¼ì˜ ë‚´ìš©ì„ íŒŒì‹±í•˜ì—¬ ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„ í™•ì¸

**ë¬¸ì œ**: `atuin sync`ë¥¼ ì‹¤í–‰í•´ë„ `last_sync_time` íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

```bash
# sync ì „
$ cat ~/.local/share/atuin/last_sync_time
2026-01-13T07:26:31.004161Z

# sync í›„ (ë³€í™” ì—†ìŒ!)
$ atuin sync
0/0 up/down to record store
Sync complete! 53 items in history database

$ cat ~/.local/share/atuin/last_sync_time
2026-01-13T07:26:31.004161Z  # ë™ì¼
```

**ì›ì¸**: atuin 18.xë¶€í„° **record-based sync (v2)**ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ `last_sync_time` íŒŒì¼ì€ ë” ì´ìƒ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ. ì´ íŒŒì¼ì€ ë ˆê±°ì‹œ sync v1ìš©.

### ì‹œí–‰ì°©ì˜¤ 2: `records.db` mtimeë„ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

**ë‘ ë²ˆì§¸ ì‹œë„**: `records.db` íŒŒì¼ì˜ ìˆ˜ì • ì‹œê°„(mtime)ì„ ì‚¬ìš©

**ë¬¸ì œ**: `atuin sync` ì‹¤í–‰ ì‹œ ë™ê¸°í™”í•  ë°ì´í„°ê°€ ì—†ìœ¼ë©´ (0/0 up/down) íŒŒì¼ì´ ìˆ˜ì •ë˜ì§€ ì•ŠìŒ

```bash
$ ls -la ~/.local/share/atuin/records.db
.rw-------@ 94k glen 13 Jan 16:54  # mtime ê³ ì •

$ atuin sync
0/0 up/down to record store
Sync complete!

$ ls -la ~/.local/share/atuin/records.db
.rw-------@ 94k glen 13 Jan 16:54  # ë³€í™” ì—†ìŒ
```

**ì›ì¸**: ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì€ ì‹¤ì œ ë°ì´í„° ë³€ê²½ì´ ìˆì„ ë•Œë§Œ ìˆ˜ì •ë¨.

### ìµœì¢… í•´ê²°: `atuin doctor`ì˜ `last_sync` ê°’ ì‚¬ìš©

**ì„¸ ë²ˆì§¸ ì‹œë„**: `atuin doctor` ëª…ë ¹ì˜ JSON ì¶œë ¥ì—ì„œ `last_sync` ê°’ ì¶”ì¶œ

```bash
$ atuin doctor 2>&1 | grep -o '"last_sync": "[^"]*"'
"last_sync": "2026-01-13 8:12:42.22629 +00:00:00"
```

ì´ ê°’ì€ atuin ë‚´ë¶€ì—ì„œ ê´€ë¦¬ë˜ë©°, syncê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì •í™•í•˜ê²Œ ì—…ë°ì´íŠ¸ë¨.

**êµ¬í˜„**:

```lua
-- Lua (Hammerspoon)
local output = hs.execute("atuin doctor 2>&1")
local lastSyncStr = output:match('"last_sync":%s*"([^"]+)"')
```

```bash
# Bash (watchdog ìŠ¤í¬ë¦½íŠ¸)
LAST_SYNC_RAW=$(atuin doctor 2>&1 | grep -o '"last_sync": "[^"]*"' | cut -d'"' -f4)
```

### ì‹œí–‰ì°©ì˜¤ 3: `auto_sync`ê°€ ë°±ê·¸ë¼ìš´ë“œ ì£¼ê¸° ë™ê¸°í™”ê°€ ì•„ë‹˜

**ì˜¤í•´**: `sync_frequency = "1m"` ì„¤ì •ì´ 1ë¶„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ë°±ê·¸ë¼ìš´ë“œ syncë¥¼ ì‹¤í–‰í•œë‹¤ê³  ìƒê°

**ì‹¤ì œ ë™ì‘**: `auto_sync`ëŠ” **í„°ë¯¸ë„ì—ì„œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ í›„**ì—ë§Œ ë™ì‘

```
# ì˜ëª»ëœ ì´í•´
sync_frequency = "1m"  â†’ 1ë¶„ë§ˆë‹¤ ë°±ê·¸ë¼ìš´ë“œ sync? âŒ

# ì‹¤ì œ ë™ì‘
sync_frequency = "1m"  â†’ ëª…ë ¹ì–´ ì‹¤í–‰ í›„, ë§ˆì§€ë§‰ syncë¡œë¶€í„° 1ë¶„ì´ ì§€ë‚¬ìœ¼ë©´ sync ì‹œë„ âœ…
```

**ê²°ê³¼**: í„°ë¯¸ë„ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ syncê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ â†’ 3ë¶„ ì „ì´ ë§ˆì§€ë§‰ ë™ê¸°í™”ì¸ ì´ìœ 

### í•´ê²°: daemon ëª¨ë“œ í™œì„±í™”

`~/.config/atuin/config.toml`ì— daemon ì„¤ì • ì¶”ê°€:

```toml
[sync]
records = true  # sync v2 í™œì„±í™”

[daemon]
enabled = true
sync_frequency = 60  # ì´ˆ ë‹¨ìœ„ (ë¬¸ìì—´ "1m"ì´ ì•„ë‹˜!)
```

ê·¸ë¦¬ê³  `atuin daemon`ì„ launchdë¡œ ìë™ ì‹œì‘:

```nix
launchd.agents.atuin-daemon = {
  enable = true;
  config = {
    Label = "com.green.atuin-daemon";
    ProgramArguments = [ ".../atuin" "daemon" ];
    RunAtLoad = true;
    KeepAlive = true;
  };
};
```

### ì‹œí–‰ì°©ì˜¤ 4: í•˜ë“œì½”ë”©ëœ ì„¤ì •ê°’

**ë¬¸ì œ**: ì„¤ì •ê°’ì´ ì—¬ëŸ¬ íŒŒì¼ì— ì¤‘ë³µ ì •ì˜ë¨

```lua
-- atuin_menubar.lua
local syncThresholdHours = 24
local logRetentionDays = 30
```

```nix
-- default.nix
syncThresholdHours = 24;
logRetentionDays = 30;
```

**í•´ê²°**: Single Source of Truth íŒ¨í„´ ì ìš©

```
default.nix (ì„¤ì •ê°’ ì •ì˜)
    â”‚
    â”œâ”€â”€â–¶ JSON íŒŒì¼ ìƒì„± â†’ Hammerspoonì—ì„œ ì½ê¸°
    â”‚
    â””â”€â”€â–¶ í™˜ê²½ë³€ìˆ˜ â†’ watchdog ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì½ê¸°
```

### ì‹œí–‰ì°©ì˜¤ 5: Hammerspoonì—ì„œ atuin ëª» ì°¾ìŒ

**ë¬¸ì œ**: ë©”ë‰´ë°”ì—ì„œ "ì§€ê¸ˆ ë™ê¸°í™”" ë²„íŠ¼ì„ ëˆŒëŸ¬ë„ ë¡œê·¸ì— "Attempting sync..." ë©”ì‹œì§€ê°€ ì—†ìŒ

**ì›ì¸**: Hammerspoonì˜ PATHì— atuin ê²½ë¡œê°€ ì—†ìŒ

```lua
-- ìŠ¤í¬ë¦½íŠ¸ì˜ PATH
/run/current-system/sw/bin
$HOME/.nix-profile/bin
/opt/homebrew/bin
...

-- atuin ì‹¤ì œ ê²½ë¡œ (ëˆ„ë½!)
/etc/profiles/per-user/glen/bin/atuin
```

**í•´ê²°**: PATHì— per-user ê²½ë¡œ ì¶”ê°€

```bash
export PATH="/etc/profiles/per-user/$USER/bin:..."
```

### ìµœì¢… êµ¬í˜„ ê²°ê³¼

| í•­ëª© | ì´ˆê¸° | ìµœì¢… |
|------|------|------|
| sync ìƒíƒœ ì†ŒìŠ¤ | `last_sync_time` íŒŒì¼ | `atuin doctor` ì¶œë ¥ |
| ì„ê³„ê°’ | 24ì‹œê°„ | 5ë¶„ |
| ìƒíƒœ ì²´í¬ ì£¼ê¸° | 1ì‹œê°„ | 10ë¶„ |
| ë°±ê·¸ë¼ìš´ë“œ sync | ì—†ìŒ | daemon ëª¨ë“œ (60ì´ˆ) |
| ì„¤ì • ê´€ë¦¬ | í•˜ë“œì½”ë”© | JSON + í™˜ê²½ë³€ìˆ˜ |
| ìŠ¤í¬ë¦½íŠ¸ ì´ë¦„ | `atuin-sync-monitor` | `atuin-watchdog` |

### êµí›ˆ

1. **ê³µì‹ ë¬¸ì„œë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•¨**: atuinì˜ `auto_sync`, `sync_frequency` ë™ì‘ ë°©ì‹ì€ ë¬¸ì„œì— ëª…í™•íˆ ì„¤ëª…ë˜ì–´ ìˆì§€ ì•ŠìŒ. ì‹¤ì œ í…ŒìŠ¤íŠ¸ì™€ ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ì´ í•„ìš”.

2. **ë ˆê±°ì‹œ vs í˜„ì¬**: `last_sync_time` ê°™ì€ íŒŒì¼ì´ ì¡´ì¬í•´ë„ í˜„ì¬ ë²„ì „ì—ì„œ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”. atuinì€ sync v1 â†’ v2ë¡œ ì „í™˜í•˜ë©´ì„œ ë§ì€ ë‚´ë¶€ êµ¬ì¡°ê°€ ë³€ê²½ë¨.

3. **ë‹¨ì¼ ì†ŒìŠ¤ ì›ì¹™**: ì„¤ì •ê°’ì´ ì—¬ëŸ¬ ê³³ì— ë¶„ì‚°ë˜ë©´ ë””ë²„ê¹…ì´ ì–´ë ¤ì›€. ì²˜ìŒë¶€í„° ì¤‘ì•™ ê´€ë¦¬ ì„¤ê³„ ê¶Œì¥.

4. **PATH ë¬¸ì œ**: Nix í™˜ê²½ì—ì„œ Hammerspoon, launchd ë“± ì™¸ë¶€ ì‹¤í–‰ í™˜ê²½ì€ ì‰˜ê³¼ ë‹¤ë¥¸ PATHë¥¼ ê°€ì§. ëª…ì‹œì ìœ¼ë¡œ ì„¤ì • í•„ìš”.

---

## 2026-01-13: Atuin ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨

> í…ŒìŠ¤íŠ¸ í™˜ê²½: atuin 18.10.0 (nixpkgs), 18.11.0 (GitHub ë¦´ë¦¬ìŠ¤), macOS Apple Silicon

### ëª©í‘œ

1. ê¸°ì¡´ ê³„ì •(glen)ì—ì„œ ìƒˆ ê³„ì •(greenhead)ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
2. 62,000ê°œ ì´ìƒì˜ íˆìŠ¤í† ë¦¬ ë³´ì¡´
3. ë™ê¸°í™” ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬ì¶•

### ì´ˆê¸° ìƒíƒœ

```bash
$ cat ~/.local/share/atuin/last_sync_time
2025-09-26T04:11:39.71577ZZ  # ì•½ 4ê°œì›” ì „!

$ atuin status
Error: There was an error with the atuin sync service: Status 404.
```

- `atuin sync`ëŠ” "Sync complete!" ì¶œë ¥í•˜ì§€ë§Œ ì‹¤ì œë¡œ ë™ê¸°í™” ì•ˆ ë¨
- `last_sync_time` ì—…ë°ì´íŠ¸ ì•ˆ ë¨

### ì‹œë„ ê³¼ì •

#### 1ë‹¨ê³„: ìƒˆ ê³„ì • ìƒì„± ì‹œë„

```bash
# ë°±ì—…
cp ~/.local/share/atuin/{history.db,key,records.db} ~/.local/share/atuin/*.backup-20260113

# ë¡œê·¸ì•„ì›ƒ í›„ ìƒˆ ê³„ì • ë“±ë¡
atuin logout
atuin register -u greenhead -e <email>
```

**ë¬¸ì œ**: ìƒˆ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ë„ `atuin status`ì—ì„œ ë™ì¼í•œ 404 ì˜¤ë¥˜

#### 2ë‹¨ê³„: ë°ì´í„° ì´ˆê¸°í™” ë° ì¬ì‹œë„

```bash
rm -f ~/.local/share/atuin/{history.db,key,session,host_id,records.db,...}
atuin login -u greenhead
```

**ë¬¸ì œ**: ì„œë²„ì—ì„œ ê¸°ì¡´ íˆìŠ¤í† ë¦¬ ë‹¤ìš´ë¡œë“œ ì‹œ encryption key ë¶ˆì¼ì¹˜

```
Error: attempting to decrypt with incorrect key.
currently using k4.lid.XXX..., expecting k4.lid.YYY...
```

#### 3ë‹¨ê³„: ë°±ì—… key ë³µì› ì‹œë„

```bash
cp ~/.local/share/atuin/key.backup-20260113 ~/.local/share/atuin/key
atuin sync
```

**ê²°ê³¼**:
- ì„œë²„ì— ë‘ ê°œì˜ í˜¸ìŠ¤íŠ¸ ì¡´ì¬ (ê¸°ì¡´ + ìƒˆë¡œ ìƒì„±)
- ê° í˜¸ìŠ¤íŠ¸ê°€ ë‹¤ë¥¸ keyë¡œ ì•”í˜¸í™”ëœ ë°ì´í„° ë³´ìœ 
- ì–´ë–¤ keyë¥¼ ì‚¬ìš©í•´ë„ ì¼ë¶€ ë°ì´í„° ë³µí˜¸í™” ì‹¤íŒ¨

#### 4ë‹¨ê³„: ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì‹œë„

```bash
# 18.11.0 ì§ì ‘ ë‹¤ìš´ë¡œë“œ
curl -sLO https://github.com/atuinsh/atuin/releases/download/v18.11.0/atuin-aarch64-apple-darwin.tar.gz
./atuin-aarch64-apple-darwin/atuin status
```

**ê²°ê³¼**: ë™ì¼í•œ 404 ì˜¤ë¥˜. í´ë¼ì´ì–¸íŠ¸ ë²„ì „ ë¬¸ì œê°€ ì•„ë‹˜.

#### 5ë‹¨ê³„: ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„

```bash
git clone https://github.com/atuinsh/atuin.git ~/Workspace/atuin-source
```

**ë°œê²¬** (`crates/atuin-server/src/router.rs`):

```rust
// Sync v1 routes - can be disabled in favor of record-based sync
if settings.sync_v1_enabled {
    routes = routes
        .route("/sync/status", get(handlers::status::status))
        // ...
}
```

**ê·¼ë³¸ ì›ì¸**: Atuin í´ë¼ìš°ë“œ ì„œë²„(`api.atuin.sh`)ê°€ Sync v1ì„ ë¹„í™œì„±í™”í•¨
- `/sync/status` ì—”ë“œí¬ì¸íŠ¸ê°€ ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- `atuin status`ëŠ” v1 APIë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ 404 ë°˜í™˜
- `atuin sync`ëŠ” v2 API (`/api/v0/*`)ë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì •ìƒ ì‘ë™

### ìµœì¢… ê²°ê³¼

| í•­ëª© | ê²°ê³¼ |
|------|------|
| ê³„ì • ë§ˆì´ê·¸ë ˆì´ì…˜ | âŒ í¬ê¸° (key ì¶©ëŒ í•´ê²° ë¶ˆê°€) |
| ê¸°ì¡´ íˆìŠ¤í† ë¦¬ ë³´ì¡´ | âŒ ì†ì‹¤ (ë°±ì—… íŒŒì¼ ì‚­ì œë¨) |
| ë™ê¸°í™” ëª¨ë‹ˆí„°ë§ | âœ… êµ¬í˜„ ì™„ë£Œ |
| `atuin status` 404 | âš ï¸ ì„œë²„ ì¸¡ ë¬¸ì œ, í•´ê²° ë¶ˆê°€ |

### êµí›ˆ

1. **ë°±ì—…ì€ ì—¬ëŸ¬ ê³³ì—**: ì‘ì—… ì¤‘ì— ë°±ì—… íŒŒì¼ì´ ì‚­ì œë¨. ë³„ë„ ê²½ë¡œì—ë„ ë°±ì—… í•„ìš”.

2. **Encryption keyëŠ” ì‹ ì¤‘í•˜ê²Œ**:
   - ìƒˆ ê³„ì • ë¡œê·¸ì¸ ì‹œ ìƒˆ keyê°€ ìë™ ìƒì„±ë¨
   - ê¸°ì¡´ keyë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸ì—ì„œ ì…ë ¥ í•„ìš”
   - keyê°€ ë‹¤ë¥´ë©´ ì„œë²„ ë°ì´í„° ë³µí˜¸í™” ë¶ˆê°€

3. **404 ì˜¤ë¥˜ì˜ ë‹¤ì–‘í•œ ì›ì¸**:
   - ì²˜ìŒì—ëŠ” ì„¸ì…˜/ì¸ì¦ ë¬¸ì œë¡œ ì¶”ì •
   - ì‹¤ì œë¡œëŠ” ì„œë²„ API ë¹„í™œì„±í™” (Sync v1 deprecated)

4. **ì†ŒìŠ¤ ì½”ë“œ ë¶„ì„ì˜ ì¤‘ìš”ì„±**:
   - ì—ëŸ¬ ë©”ì‹œì§€ë§Œìœ¼ë¡œëŠ” ì›ì¸ íŒŒì•… ì–´ë ¤ì›€
   - ì‹¤ì œ ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ì½ì–´ì•¼ ì •í™•í•œ ì›ì¸ ë°œê²¬

### ê´€ë ¨ íŒŒì¼

| íŒŒì¼                                                        | ì„¤ëª…                  |
| ----------------------------------------------------------- | --------------------- |
| `modules/darwin/programs/atuin/default.nix`                 | launchd ì—ì´ì „íŠ¸ ì„¤ì • |
| `modules/darwin/programs/atuin/files/atuin-sync-monitor.sh` | ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸     |

### í–¥í›„ ê³„íš

- [ ] Atuin GitHubì— ì´ìŠˆ ì œì¶œ (status 404 ë¬¸ì œ)
- [ ] ì§‘ ë§¥ë¶ì—ì„œ ë™ì¼í•œ ì„¤ì • ì ìš©
- [ ] ê¸°ì¡´ íˆìŠ¤í† ë¦¬ëŠ” í¬ê¸°, ìƒˆë¡œ ì‹œì‘

---

## 2026-01-11: Claude Code ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ í•´ê²°

> í…ŒìŠ¤íŠ¸ í™˜ê²½: Claude Code 2.1.4, macOS

### ë°°ê²½

`settings.json`ì˜ `enabledPlugins`ì—ì„œ í”ŒëŸ¬ê·¸ì¸ í”„ë¡œí¼í‹°ë¥¼ ì§ì ‘ ì‚­ì œí•˜ë©´ **ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸(ghost plugin)** ë¬¸ì œê°€ ë°œìƒ:

| ìƒíƒœ | ì¦ìƒ |
|------|------|
| `/plugin` ëª…ë ¹ | í”ŒëŸ¬ê·¸ì¸ì´ "ì„¤ì¹˜ë¨"ìœ¼ë¡œ í‘œì‹œ |
| ì„¤ì • ë³€ê²½ | í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€ ë¶ˆê°€ |
| í”ŒëŸ¬ê·¸ì¸ ê¸°ëŠ¥ | ë™ì‘í•˜ì§€ ì•ŠìŒ |

### ì‹œë„ 1: ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì¬ì„¤ì¹˜ (ì‹¤íŒ¨)

```bash
claude plugin marketplace remove claude-plugins-official
claude plugin marketplace add anthropics/claude-plugins-official
```

**ê²°ê³¼**: âŒ ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ ì—¬ì „íˆ ì¡´ì¬

ë§ˆì¼“í”Œë ˆì´ìŠ¤ë¥¼ ì¬ì„¤ì¹˜í•´ë„ ê¸°ì¡´ `enabledPlugins` ìƒíƒœì™€ì˜ ë™ê¸°í™” ë¬¸ì œëŠ” í•´ê²°ë˜ì§€ ì•ŠìŒ.

### í•´ê²°: settings.jsonì— ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ ì§ì ‘ ëª…ì‹œ

**ì›ë¦¬**: Claude Codeê°€ í”ŒëŸ¬ê·¸ì¸ì„ ì¸ì‹í•˜ë ¤ë©´ `enabledPlugins`ì— í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì´ ì¡´ì¬í•´ì•¼ í•¨. ìœ ë ¹ ìƒíƒœì—ì„œëŠ” CLIë„ í”ŒëŸ¬ê·¸ì¸ì„ ì°¾ì§€ ëª»í•¨.

**í•´ê²° ìˆœì„œ**:

1. `settings.json`ì— ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ì„ ë‹¤ì‹œ ëª…ì‹œ:
   ```json
   "enabledPlugins": {
     "ghost-plugin-name@marketplace": true
   }
   ```

2. Claude Code ì¬ì‹œì‘ (ë˜ëŠ” `/plugin` ëª…ë ¹ìœ¼ë¡œ í™•ì¸)

3. CLIë¡œ í”ŒëŸ¬ê·¸ì¸ ì œê±°:
   ```bash
   claude plugin uninstall ghost-plugin-name@marketplace --scope user
   ```

4. ì •ìƒì ìœ¼ë¡œ ì œê±°ë¨ í™•ì¸

### êµí›ˆ

1. **í”ŒëŸ¬ê·¸ì¸ ì œê±°ëŠ” ë°˜ë“œì‹œ CLI ì‚¬ìš©**
   - `settings.json` ì§ì ‘ í¸ì§‘ìœ¼ë¡œ í”ŒëŸ¬ê·¸ì¸ì„ ì‚­ì œí•˜ë©´ ë™ê¸°í™” ë¬¸ì œ ë°œìƒ
   - `claude plugin uninstall` ëª…ë ¹ ì‚¬ìš© í•„ìˆ˜

2. **ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ ë³µêµ¬ ë°©ë²•**
   - `settings.json`ì— ìœ ë ¹ í”ŒëŸ¬ê·¸ì¸ì„ ë‹¤ì‹œ ì¶”ê°€í•˜ì—¬ Claude Codeê°€ ì¸ì‹í•˜ê²Œ ë§Œë“  í›„ CLIë¡œ ì œê±°
   - ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì¬ì„¤ì¹˜ë¡œëŠ” í•´ê²° ë¶ˆê°€

3. **Nix ì„ ì–¸ì  ê´€ë¦¬ ì‹œ ì£¼ì˜**
   - `mkOutOfStoreSymlink`ë¡œ `settings.json` ê´€ë¦¬ ì‹œ, ì§ì ‘ í¸ì§‘ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì‹¤ìˆ˜ ê°€ëŠ¥
   - í”ŒëŸ¬ê·¸ì¸ ê´€ë ¨ ë³€ê²½ì€ í•­ìƒ Claude Code CLI ì‚¬ìš© ê¶Œì¥

---

## 2026-01-10: cat â†’ bat alias ì œê±° (í˜¸í™˜ì„± ë¬¸ì œ)

> í…ŒìŠ¤íŠ¸ í™˜ê²½: bat 0.26.1, macOS cat

### ë°°ê²½

`cat` ëª…ë ¹ì–´ë¥¼ `bat`ìœ¼ë¡œ aliasí•˜ì—¬ ê¸°ë³¸ íŒŒì¼ ì¶œë ¥ì— êµ¬ë¬¸ ê°•ì¡°ë¥¼ ì ìš©í•˜ë ¤ í–ˆìŒ.

```nix
# modules/shared/programs/shell/default.nix
home.shellAliases = {
  # íŒŒì¼ ì¶œë ¥ (bat ì‚¬ìš©)
  cat = "bat";
};
```

### ê¸°ëŒ€

`bat`ì´ `cat`ì˜ ì™„ì „í•œ ìƒìœ„í˜¸í™˜ì´ë¼ê³  ê°€ì •:

- ëª¨ë“  `cat` ì˜µì…˜ì´ `bat`ì—ì„œë„ ë™ì¼í•˜ê²Œ ì‘ë™
- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ë‚˜ ëª…ë ¹ì–´ê°€ ì˜í–¥ë°›ì§€ ì•ŠìŒ

### ì‹¤íŒ¨ ì›ì¸

**`bat`ì€ `cat`ì˜ ìƒìœ„í˜¸í™˜ì´ ì•„ë‹˜.** ì¼ë¶€ ì˜µì…˜ì€ í˜¸í™˜ë˜ì§€ë§Œ, í•µì‹¬ ì§„ë‹¨ ì˜µì…˜ë“¤ì´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚´.

macOS cat ì˜µì…˜: `cat [-belnstuv]`

| ì˜µì…˜ | macOS cat ë™ì‘ | bat 0.26.1 ë™ì‘ |
|------|----------------|-----------------|
| `-v` | ë¹„ì¶œë ¥ ë¬¸ì í‘œì‹œ (`^A`, `^[` ë“±) | âŒ ì—ëŸ¬: `unexpected argument '-v' found` |
| `-e` | ì¤„ ëì— `$` í‘œì‹œ + `-v` ì•”ì‹œ | âŒ ì—ëŸ¬ |
| `-t` | íƒ­ì„ `^I`ë¡œ í‘œì‹œ + `-v` ì•”ì‹œ | âŒ ì—ëŸ¬ |
| `-b` | ë¹„ì–´ìˆì§€ ì•Šì€ ì¤„ì—ë§Œ ë²ˆí˜¸ | âŒ ì—ëŸ¬ |
| `-n` | ëª¨ë“  ì¤„ì— ë²ˆí˜¸ | âœ… ë™ì¼ (`-n, --number`) |
| `-s` | ì—°ì† ë¹ˆ ì¤„ ì••ì¶• | âœ… ë™ì¼ (`-s, --squeeze-blank`) |
| `-u` | ë²„í¼ë§ ë¹„í™œì„±í™” | âœ… ë™ì¼ (`-u, --unbuffered`) |
| `-A` | âŒ macOSì—ì„œ ë¯¸ì§€ì› (GNU cat ì „ìš©) | âœ… ì§€ì› (`-A, --show-all`) |

**ì‹¤ì œ ë¬¸ì œ ìƒí™©:**

```bash
# CSI u ëª¨ë“œ ì§„ë‹¨ ì‹œ í‚¤ ì…ë ¥ í…ŒìŠ¤íŠ¸
cat -v
# ê¸°ëŒ€: ì…ë ¥ ëŒ€ê¸° í›„ ë¹„ì¶œë ¥ ë¬¸ì í‘œì‹œ
# ì‹¤ì œ (alias ì ìš© ì‹œ): ì—ëŸ¬ ë°œìƒ
#   error: unexpected argument '-v' found
#     tip: to pass '-v' as a value, use '-- -v'
```

### í•´ê²°

alias ì œê±°:

```nix
home.shellAliases = {
  # cat = "bat";  # ì‚­ì œ: -v, -e, -t, -b ì˜µì…˜ ë¹„í˜¸í™˜
};
```

`bat`ì€ ë…ë¦½ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ , `cat`ì€ ì›ë³¸ ìœ ì§€.

### êµí›ˆ

1. **CLI ë„êµ¬ alias ì „ì— ì˜µì…˜ í˜¸í™˜ì„± í™•ì¸ í•„ìˆ˜**
   - "ìƒìœ„í˜¸í™˜"ì´ë¼ëŠ” ê°€ì •ì€ ìœ„í—˜
   - íŠ¹íˆ ì‹œìŠ¤í…œ ìœ í‹¸ë¦¬í‹°(`cat`, `ls`, `grep` ë“±)ëŠ” ì˜µì…˜ ì²´ê³„ê°€ í‘œì¤€í™”ë˜ì–´ ìˆìŒ

2. **aliasê°€ ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸/ë¬¸ì„œì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŒ**
   - ë¬¸ì„œì— `cat -v` ê°™ì€ ëª…ë ¹ì–´ê°€ ìˆìœ¼ë©´ aliasë¡œ ì¸í•´ ì˜¤ì‘ë™
   - ë””ë²„ê¹… ì‹œ í˜¼ë€ ì•¼ê¸°

3. **ëŒ€ì²´ ë„êµ¬ëŠ” ëª…ì‹œì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•ˆì „**
   - `bat file.txt` (ëª…ì‹œì )
   - `cat file.txt` (aliasë¡œ bat í˜¸ì¶œ) â† í˜¼ë€ ìœ ë°œ

4. **ë¶€ë¶„ í˜¸í™˜ì€ ë” ìœ„í—˜í•  ìˆ˜ ìˆìŒ**
   - `-n`, `-s`, `-u`ëŠ” í˜¸í™˜ë˜ì–´ í‰ì†Œì—ëŠ” ë¬¸ì œì—†ì´ ì‘ë™
   - íŠ¹ì • ìƒí™©(ì§„ë‹¨, ë””ë²„ê¹…)ì—ì„œë§Œ `-v` ë“±ì„ ì‚¬ìš©í•  ë•Œ ê°‘ìê¸° ì‹¤íŒ¨
   - "ì˜ ë˜ë‹¤ê°€ ê°‘ìê¸° ì•ˆ ë¨" â†’ ì›ì¸ íŒŒì•…ì´ ì–´ë ¤ì›€

---

## 2026-01-10: VS Code customLabelsì—ì„œ ë™ì  ì•± ì´ë¦„ ì¶”ì¶œ ì‹¤íŒ¨

> í…ŒìŠ¤íŠ¸ í™˜ê²½: Cursor 2.3.33 (VS Code 1.93.0 ê¸°ë°˜)

### ë°°ê²½

Next.js Page Router + Turbopack ëª¨ë…¸ë ˆí¬ êµ¬ì¡°ì—ì„œ ì—ë””í„° íƒ­ ë ˆì´ë¸”ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ë ¤ í–ˆìŒ. ì—¬ëŸ¬ ì•±(`web`, `admin`, `mobile` ë“±)ì˜ `pages/` í´ë”ì—ì„œ ë™ì¼í•œ íŒŒì¼ëª…(`index.tsx`)ì´ ì—´ë¦´ ë•Œ êµ¬ë¶„í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ.

**ëª©í‘œ**: `apps/admin/pages/settings/index.tsx` â†’ `(admin) settings/index.tsx`

### ì‹œë„ 1: Named Capture Group ë¬¸ë²• (ì‹¤íŒ¨)

ì •ê·œì‹ì˜ Named Capture Groupì„ ì‚¬ìš©í•˜ì—¬ ì•± ì´ë¦„ì„ ë™ì ìœ¼ë¡œ ì¶”ì¶œí•˜ë ¤ ì‹œë„.

```json
"**/apps/${app:([^/]+)}/pages/**/index.{ts,tsx}": "(${app}) ${dirname}/index.${extname}"
```

**ê²°ê³¼**: ë™ì‘í•˜ì§€ ì•ŠìŒ.

**ì›ì¸**: VS Codeì˜ `customLabels.patterns`ëŠ” Named Capture Groupì´ë‚˜ ì •ê·œì‹ ìº¡ì²˜ë¥¼ **ì§€ì›í•˜ì§€ ì•ŠìŒ**.

### ì‹œë„ 2: `**` ì™€ì¼ë“œì¹´ë“œ + `${dirname(N)}` ì¡°í•© (ì‹¤íŒ¨)

`**` íŒ¨í„´ìœ¼ë¡œ ê°€ë³€ ê¹Šì´ ê²½ë¡œë¥¼ ë§¤ì¹­í•˜ê³ , `${dirname(N)}`ìœ¼ë¡œ íŠ¹ì • ìœ„ì¹˜ì˜ í´ë”ëª…ì„ ì¶”ì¶œí•˜ë ¤ ì‹œë„.

```json
"**/apps/*/pages/**/index.{ts,tsx}": "(${dirname(3)}) ${dirname}/index.${extname}"
```

**ê²°ê³¼**: ì•± ì´ë¦„ì´ ì•„ë‹Œ ë‹¤ë¥¸ í´ë”ëª…ì´ í‘œì‹œë¨.

| ê²½ë¡œ | ê¸°ëŒ€ ê²°ê³¼ | ì‹¤ì œ ê²°ê³¼ |
|------|----------|----------|
| `apps/admin/pages/settings/index.tsx` | `(admin) settings/index.tsx` | `(apps) settings/index.tsx` |
| `apps/admin/pages/a/b/index.tsx` | `(admin) b/index.tsx` | `(pages) b/index.tsx` |

**ì›ì¸**: `${dirname(N)}`ì€ **íŒŒì¼ ê¸°ì¤€ ì ˆëŒ€ ì¸ë±ì‹±**ì´ë¯€ë¡œ, `**`ê°€ ë§¤ì¹­í•˜ëŠ” ê²½ë¡œ ê¹Šì´ì— ë”°ë¼ Në²ˆì§¸ í´ë”ê°€ ë‹¬ë¼ì§.

### VS Code customLabelsì˜ í•œê³„

**ì§€ì›ë˜ëŠ” ë³€ìˆ˜ (ì „ë¶€)**:

| ë³€ìˆ˜ | ì„¤ëª… |
|------|------|
| `${filename}` | í™•ì¥ì ì œì™¸ íŒŒì¼ëª… |
| `${extname}` | í™•ì¥ì |
| `${dirname}` | ì§ì ‘ ìƒìœ„ í´ë”ëª… |
| `${dirname(N)}` | Në²ˆì§¸ ìƒìœ„ í´ë”ëª… (íŒŒì¼ ê¸°ì¤€ ì ˆëŒ€ ì¸ë±ì‹±) |

**ì§€ì›ë˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥**:

- Named Capture Group (`${name:pattern}`)
- ì •ê·œì‹ ìº¡ì²˜ (`$1`, `$2`)
- íŒ¨í„´ ë§¤ì¹­ ìœ„ì¹˜ ê¸°ë°˜ ë³€ìˆ˜ ì¶”ì¶œ
- `**` ì™€ì¼ë“œì¹´ë“œì™€ ìƒëŒ€ì  ì¸ë±ì‹± ì¡°í•©

### í•´ê²° ë°©ë²• (ìš°íšŒ)

ì•±ë³„ë¡œ ëª…ì‹œì ì¸ íŒ¨í„´ì„ ì‘ì„±í•˜ëŠ” ìˆ˜ë°–ì— ì—†ìŒ.

```json
"**/apps/web/pages/**/index.{ts,tsx}": "(web) ${dirname}/index.${extname}",
"**/apps/admin/pages/**/index.{ts,tsx}": "(admin) ${dirname}/index.${extname}",
"**/apps/mobile/pages/**/index.{ts,tsx}": "(mobile) ${dirname}/index.${extname}"
```

**ë‹¨ì **: ì•±ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ íŒ¨í„´ì„ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•¨.

### êµí›ˆ

1. **VS Code customLabelsëŠ” ë‹¨ìˆœí•œ í…œí”Œë¦¿ ì¹˜í™˜ë§Œ ì§€ì›**
   - ì •ê·œì‹ ìº¡ì²˜, ë™ì  ë³€ìˆ˜ ì¶”ì¶œ ë“± ê³ ê¸‰ ê¸°ëŠ¥ ì—†ìŒ
   - glob íŒ¨í„´ì€ íŒŒì¼ ë§¤ì¹­ìš©ì¼ ë¿, ê°’ ì¶”ì¶œìš©ì´ ì•„ë‹˜

2. **`${dirname(N)}`ì€ ì ˆëŒ€ ì¸ë±ì‹±**
   - íŒŒì¼ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ê³ ì •ëœ ê¹Šì´ë§Œ ì°¸ì¡° ê°€ëŠ¥
   - `**` ì™€ì¼ë“œì¹´ë“œì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ê²°ê³¼

3. **ëª¨ë…¸ë ˆí¬ì—ì„œëŠ” ì•±ë³„ ëª…ì‹œì  íŒ¨í„´ì´ í•„ìš”**
   - ë™ì ìœ¼ë¡œ ì•± ì´ë¦„ì„ ì¶”ì¶œí•˜ëŠ” ë°©ë²• ì—†ìŒ
   - ì•± ëª©ë¡ì´ ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ìˆ˜ë™ ê´€ë¦¬ê°€ í˜„ì‹¤ì 

---

## 2024-12-25: dutië¡œ .html/.htm ê¸°ë³¸ ì•± ì„¤ì • ì‹¤íŒ¨

### ë°°ê²½

macOSì—ì„œ í…ìŠ¤íŠ¸/ì½”ë“œ íŒŒì¼(.txt, .md, .js ë“±)ì„ ë”ë¸”í´ë¦­ ì‹œ Xcode ëŒ€ì‹  Cursorë¡œ ì—´ë¦¬ë„ë¡ `duti`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì •.

### ì‹œë„í•œ ë‚´ìš©

```nix
codeExtensions = [
  "txt" "text" "md" "mdx" "js" "jsx" "ts" "tsx" "mjs" "cjs"
  "json" "yaml" "yml" "toml" "html" "htm" "css" "scss" "sass" "less"
  # ... ê¸°íƒ€ í™•ì¥ì
];

home.activation.setCursorAsDefaultEditor = lib.hm.dag.entryAfter [ "writeBoundary" ] ''
  ${lib.concatMapStringsSep "\n" (ext:
    "${pkgs.duti}/bin/duti -s ${cursorBundleId} .${ext} all"
  ) codeExtensions}
'';
```

### ê²°ê³¼

```
failed to set com.todesktop.230313mzl4w4u92 as handler for public.html (error -54)
```

- **error -54**: macOS ê¶Œí•œ ì—ëŸ¬ (`permErr`)
- `.html`, `.htm` í™•ì¥ìë§Œ ì‹¤íŒ¨, ë‚˜ë¨¸ì§€ëŠ” ì„±ê³µ

### ì›ì¸ ë¶„ì„

1. **Safariê°€ `public.html` UTIë¥¼ ì‹œìŠ¤í…œ ìˆ˜ì¤€ì—ì„œ ì„ ì **
   - macOSëŠ” Safarië¥¼ HTML íŒŒì¼ì˜ ê¸°ë³¸ í•¸ë“¤ëŸ¬ë¡œ ê°•í•˜ê²Œ ë³´í˜¸
   - `duti`ê°€ `public.html` UTI ì„¤ì • ì‹œë„ ì‹œ ê¶Œí•œ ê±°ë¶€ë¨

2. **dutiì˜ í™•ì¥ì ì„¤ì • ë™ì‘**
   - `.html` í™•ì¥ì ì„¤ì • ì‹œ ë‚´ë¶€ì ìœ¼ë¡œ `public.html` UTIë„ í•¨ê»˜ ì„¤ì • ì‹œë„
   - UTI ì„¤ì • ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì¶œë ¥ (ì¹˜ëª…ì ì´ì§€ ì•ŠìŒ)

### í•´ê²° ë°©ë²•

**ë°©ë²• 1: í™•ì¥ì ëª©ë¡ì—ì„œ html/htm ì œê±° (ì ìš©)**

```nix
codeExtensions = [
  "txt" "text" "md" "mdx" "js" "jsx" "ts" "tsx" "mjs" "cjs"
  "json" "yaml" "yml" "toml" "css" "scss" "sass" "less"  # html, htm ì œê±°
  # ...
];
```

**ë°©ë²• 2: Finderì—ì„œ ìˆ˜ë™ ì„¤ì • (í•„ìš”ì‹œ)**

1. `.html` íŒŒì¼ ìš°í´ë¦­ â†’ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (Cmd+I)
2. "ë‹¤ìŒìœ¼ë¡œ ì—´ê¸°" â†’ Cursor ì„ íƒ â†’ "ëª¨ë‘ ë³€ê²½" í´ë¦­

### êµí›ˆ

1. **macOS Launch ServicesëŠ” ì‹œìŠ¤í…œ ì•±(Safari, Preview ë“±)ì„ ë³´í˜¸í•¨**
   - íŠ¹ì • UTIëŠ” ì‚¬ìš©ìê°€ ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡ ì ê²¨ ìˆìŒ
   - CLI ë„êµ¬ë¡œ ê°•ì œ ë³€ê²½ ë¶ˆê°€

2. **duti ì—ëŸ¬ëŠ” ì¹˜ëª…ì ì´ì§€ ì•ŠìŒ**
   - ê°œë³„ í™•ì¥ì ì„¤ì • ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ í™•ì¥ìì— ì˜í–¥ ì—†ìŒ
   - activation ì „ì²´ê°€ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŒ

3. **HTML íŒŒì¼ì€ ë¸Œë¼ìš°ì €ë¡œ ì—¬ëŠ” ê²ƒì´ macOS ê¸°ë³¸ ì •ì±…**
   - ê°œë°œì ì›Œí¬í”Œë¡œìš°ì™€ ì¶©ëŒí•˜ëŠ” ë¶€ë¶„
   - í•„ìš”ì‹œ ìˆ˜ë™ ì„¤ì •ìœ¼ë¡œ ëŒ€ì‘

---

## 2024-12-24: Anki ì• ë“œì˜¨ Nix ì„ ì–¸ì  ê´€ë¦¬ ì‹œë„ (ë³´ë¥˜)

### ëª©í‘œ

Anki ì• ë“œì˜¨ 10ê°œë¥¼ Nixë¡œ ì„ ì–¸ì  ê´€ë¦¬í•˜ì—¬ ì¬í˜„ ê°€ëŠ¥í•œ í™˜ê²½ êµ¬ì¶•.

### ì‹œë„í•œ ë°©ì‹ë“¤

#### ë°©ì‹ 1: AnkiWeb ì§ì ‘ ë‹¤ìš´ë¡œë“œ (ì‹¤íŒ¨)

AnkiWebì—ì„œ ì• ë“œì˜¨ì„ ì§ì ‘ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ë°©ì‹.

```
https://ankiweb.net/shared/download/{addon_id}
```

**ì‹¤íŒ¨ ì›ì¸:** AnkiWebì˜ ë‹¤ìš´ë¡œë“œ URLì€ ì§ì ‘ ì ‘ê·¼ì„ ì°¨ë‹¨í•¨. ë¸Œë¼ìš°ì € ì„¸ì…˜/ì¿ í‚¤ê°€ í•„ìš”í•˜ì—¬ `fetchurl`ë¡œ ë‹¤ìš´ë¡œë“œ ë¶ˆê°€.

---

#### ë°©ì‹ 2: ë¡œì»¬ ì†ŒìŠ¤ íŒ¨í‚¤ì§• (ë°˜ë ¤)

ì• ë“œì˜¨ ì†ŒìŠ¤ ì½”ë“œë¥¼ nixos-config ì €ì¥ì†Œì— ì§ì ‘ í¬í•¨í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ë°©ì‹.

```
modules/darwin/programs/anki/
â””â”€â”€ sources/
    â”œâ”€â”€ 24411424/
    â”œâ”€â”€ 31746032/
    â””â”€â”€ ...
```

**ë°˜ë ¤ ì‚¬ìœ :** ê° ì• ë“œì˜¨ì˜ ì†ŒìŠ¤ì½”ë“œ(ìˆ˜ë°± ê°œ íŒŒì¼)ë¥¼ ì „ë¶€ gitìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í•˜ë¯€ë¡œ ì €ì¥ì†Œ ê·œëª¨ê°€ ë„ˆë¬´ ì»¤ì§. diffë„ ê³¼ë„í•˜ê²Œ ë§ì´ ë°œìƒ.

---

#### ë°©ì‹ 3: GitHub ì €ì¥ì†Œ í™œìš© (ë³´ë¥˜)

`fetchFromGitHub`ë¥¼ ì‚¬ìš©í•˜ì—¬ GitHubì—ì„œ ì• ë“œì˜¨ ì†ŒìŠ¤ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ë°©ì‹.

```nix
pkgs.fetchFromGitHub {
  owner = "addon-author";
  repo = "addon-repo";
  rev = "<commit-hash>";
  sha256 = "...";
};
```

**ìƒì„±í–ˆë˜ íŒŒì¼ êµ¬ì¡°:**

```
modules/darwin/programs/anki/
â”œâ”€â”€ default.nix          # ë©”ì¸ ëª¨ë“ˆ
â”œâ”€â”€ addons.nix           # fetchFromGitHub ì• ë“œì˜¨ ì •ì˜
â””â”€â”€ files/               # ì„¤ì • íŒŒì¼
    â”œâ”€â”€ customize-shortcuts-meta.json
    â”œâ”€â”€ add-hyperlink-config.json
    â”œâ”€â”€ note-linker-config.json
    â””â”€â”€ add-table-config.json
```

### ë°©ì‹ 3ì˜ ì‹¤íŒ¨ ì›ì¸

#### 1. GitHub ì €ì¥ì†Œ êµ¬ì¡° ë¶ˆì¼ì¹˜

ëŒ€ë¶€ë¶„ì˜ Anki ì• ë“œì˜¨ GitHub ì €ì¥ì†ŒëŠ” ê°œë°œìš© êµ¬ì¡°ë¡œ ë˜ì–´ ìˆìŒ:
- `src/` ë””ë ‰í† ë¦¬ì— ì†ŒìŠ¤ ì½”ë“œ
- `forms6/` (Qt Designer UI íŒŒì¼ì—ì„œ ë¹Œë“œë˜ëŠ” Python ëª¨ë“ˆ)ì´ ë¹Œë“œë˜ì–´ì•¼ í•¨
- AnkiWeb ë°°í¬íŒì—ë§Œ ë¹Œë“œëœ íŒŒì¼ì´ í¬í•¨ë¨

| ì• ë“œì˜¨ | ë¬¸ì œì  |
|---|---|
| Add Table (1237621971) | `forms6` ëª¨ë“ˆ ëˆ„ë½ |
| Add Hyperlink (318752047) | `forms6` ëª¨ë“ˆ ëˆ„ë½ |
| Customize Shortcuts (24411424) | Qt ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ |

#### 2. ì €ì¥ì†Œë³„ srcDir ìƒì´

ê° ì €ì¥ì†Œë§ˆë‹¤ ì‹¤ì œ ì• ë“œì˜¨ íŒŒì¼ ìœ„ì¹˜ê°€ ë‹¤ë¦„:
- `custom_shortcuts/` (24411424)
- `src/` (31746032, 318752047, 1237621971)
- `src/image_occlusion_enhanced/` (1374772155)
- `src/enhanced_cloze/` (1990296174)
- `.` ë£¨íŠ¸ (1077002392, 1124670306)

### êµí›ˆ

1. **AnkiWeb ë°°í¬íŒ vs GitHub ì†ŒìŠ¤ëŠ” ë‹¤ë¥´ë‹¤**
   - GitHub ì†ŒìŠ¤ì—ëŠ” ë¹Œë“œ ê³¼ì •ì—ì„œ ìƒì„±ë˜ëŠ” íŒŒì¼(`forms6/` ë“±)ì´ ì—†ìŒ
   - `fetchFromGitHub` ë°©ì‹ì€ ëŒ€ë¶€ë¶„ì˜ ì• ë“œì˜¨ì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŒ

2. **ì‘ì—… ì „ í•­ìƒ ë°±ì—…**
   - ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê¸° ì „ì— ë°˜ë“œì‹œ ë°±ì—… ìƒì„±
   - íŠ¹íˆ ì„¤ì • íŒŒì¼, ì»¤ìŠ¤í…€ ì„¤ì •ì´ ìˆëŠ” ê²½ìš°

3. **Anki ì• ë“œì˜¨ ê´€ë¦¬ì˜ í˜„ì‹¤ì  ëŒ€ì•ˆ**
   - AnkiWebì—ì„œ ì§ì ‘ ì„¤ì¹˜/ê´€ë¦¬ (ê¸°ì¡´ ë°©ì‹)
   - AnkiWeb APIë¥¼ ì‚¬ìš©í•œ ë‹¤ìš´ë¡œë“œ (ë¶ˆì•ˆì •í•  ìˆ˜ ìˆìŒ)
   - ì• ë“œì˜¨ë³„ ë¦´ë¦¬ìŠ¤ ì•„í‹°íŒ©íŠ¸ ì‚¬ìš© (ìˆëŠ” ê²½ìš°ì—ë§Œ)

### ëŒ€ìƒ ì• ë“œì˜¨ ëª©ë¡ (ì°¸ê³ ìš©)

| ID | ì´ë¦„ |
|---|---|
| 24411424 | Customize Keyboard Shortcuts |
| 31746032 | AnkiWebView Inspector |
| 318752047 | Add Hyperlink |
| 805891399 | Extended Editor for Field |
| 1077002392 | Anki Note Linker |
| 1124670306 | Set Added Date |
| 1237621971 | Add Table |
| 1374772155 | Image Occlusion Enhanced |
| 1990296174 | Enhanced Cloze |
| 2491935955 | Quick Colour Changing |

### ê²°ë¡ 

Anki ì• ë“œì˜¨ì˜ Nix ì„ ì–¸ì  ê´€ë¦¬ëŠ” **í˜„ì‹¤ì ìœ¼ë¡œ ì–´ë ¤ì›€**. AnkiWebì—ì„œ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì •ì .

---

## 2026-01-14: Atuin Watchdog ê°œì„  ë° Daemon ë¹„í™œì„±í™”

### ë°°ê²½

íšŒì‚¬ í™˜ê²½ì—ì„œ atuin daemon ì¬ì‹œì‘ í›„ì—ë„ ë™ê¸°í™” ì§€ì—°ì´ ì§€ì†ë˜ëŠ” ë¬¸ì œ ë°œìƒ. ì›ì¸ íŒŒì•… ë° í•´ê²° ê³¼ì • ê¸°ë¡.

### íƒ€ì„ë¼ì¸ (ì‚¬ì‹¤ ê¸°ë°˜)

| ì‹œì  | ì»¤ë°‹ | ë‚´ìš© |
|------|------|------|
| 2026-01-13 17:55 | b44bea2 | daemon ëª¨ë“œ í™œì„±í™”, atuin doctor ì‚¬ìš© ì‹œì‘ |
| 2026-01-14 08:54 | fb8de27 | "ë™ê¸°í™” ì§€ì—° (1948ë¶„ ì´ˆê³¼)" ë¬¸ì œ ë°œê²¬, daemon ìë™ ë³µêµ¬ ê¸°ëŠ¥ ì¶”ê°€ |
| 2026-01-14 11:00ê²½ | ì´ë²ˆ ì„¸ì…˜ | daemon ì—¬ì „íˆ ë¶ˆì•ˆì •, CLI syncë¡œ ì™„ì „ ëŒ€ì²´ ê²°ì • |

**ì£¼ëª©í•  ì **: b44bea2ì—ì„œ daemonì„ í™œì„±í™”í•œ í›„ ì•½ 15ì‹œê°„ ë§Œì— 1948ë¶„(32ì‹œê°„) ë™ê¸°í™” ì§€ì—°ì´ ë°œê²¬ë¨. ì´ëŠ” **daemonì´ í™œì„±í™” ì§í›„ë¶€í„° ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±**ì„ ì‹œì‚¬í•¨.

### í•µì‹¬ ë°œê²¬: daemon sync vs CLI syncì˜ ì°¨ì´

ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ì„ í†µí•´ ì¤‘ìš”í•œ ì°¨ì´ì  ë°œê²¬:

**daemon sync** (`atuin-daemon/src/server/sync.rs:85`):
```rust
// sync ì„±ê³µ í›„ save_sync_time() í˜¸ì¶œ
tokio::task::spawn_blocking(Settings::save_sync_time).await??;
```

**CLI sync (v2)** (`crates/atuin/src/command/client/sync.rs`):
```rust
pub async fn run(...) -> Result<()> {
    if settings.sync.records {
        // v2 ê²½ë¡œ: save_sync_time() í˜¸ì¶œ ì—†ìŒ
        sync::sync(&settings, &db).await?;
    } else {
        // v1 ê²½ë¡œ: save_sync_time() ìˆìŒ
        atuin_client::sync::sync(&settings, false, &db).await?;
    }
}
```

**ê²°ë¡ **:
- daemonì´ ì •ìƒ ë™ì‘í•˜ë©´ `last_sync_time` íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë¨
- CLI sync (v2)ëŠ” `save_sync_time()`ì„ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ (ë²„ê·¸ë¡œ ì¶”ì •ë˜ë‚˜ í™•ì‹¤í•˜ì§€ ì•ŠìŒ)

### ì´ì „ ì»¤ë°‹(b44bea2)ì´ ë™ì‘í–ˆë˜ ì´ìœ ì— ëŒ€í•œ ë¶„ì„

**ì‚¬ì‹¤**:
- b44bea2 ì»¤ë°‹ì—ì„œëŠ” daemon ëª¨ë“œë¥¼ í™œì„±í™”í•˜ê³ , `atuin doctor`ì˜ `last_sync` ê°’ì„ ì‚¬ìš©
- daemon sync ì½”ë“œì—ëŠ” `save_sync_time()` í˜¸ì¶œì´ ì¡´ì¬í•¨

**ì¶”ì¸¡**:
- daemonì´ ì •ìƒ ë™ì‘í–ˆë‹¤ë©´ `save_sync_time()`ì´ í˜¸ì¶œë˜ì–´ `last_sync_time` íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆì„ ê²ƒ
- í•˜ì§€ë§Œ fb8de27 ì»¤ë°‹(í™œì„±í™” í›„ ì•½ 15ì‹œê°„)ì—ì„œ 1948ë¶„ ì§€ì—°ì´ ë°œê²¬ëœ ê²ƒìœ¼ë¡œ ë³´ì•„, **daemonì´ ì²˜ìŒë¶€í„° ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±**ì´ ë†’ìŒ
- "ì •ìƒ ë™ì‘ í›„ ë¬¸ì œ ë°œìƒ"ì´ ì•„ë‹ˆë¼ "í™œì„±í™” ì§í›„ë¶€í„° ë¬¸ì œ ë°œìƒ"ì´ì—ˆì„ ìˆ˜ ìˆìŒ

### ê´€ì°°ëœ daemon ë¶ˆì•ˆì • ì¦ìƒ

**í™•ì¸ëœ ì‚¬ì‹¤** (ì´ë²ˆ ì„¸ì…˜ì—ì„œ ì§ì ‘ í™•ì¸):

```bash
$ launchctl print gui/$(id -u)/com.green.atuin-daemon
runs = 218
last exit code = 1
```

- daemonì´ 218ë²ˆ ì¬ì‹œì‘ë¨
- ë§ˆì§€ë§‰ ì¢…ë£Œ ì½”ë“œê°€ 1 (ì—ëŸ¬)

**ì¶”ì¸¡ë˜ëŠ” ì›ì¸** (í™•ì¸ë˜ì§€ ì•ŠìŒ):
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶ˆì•ˆì • ì‹œ ë³µêµ¬ ì‹¤íŒ¨
- ì‹œìŠ¤í…œ ìŠ¬ë¦½/ì›¨ì´í¬ í›„ ë³µêµ¬ ì‹¤íŒ¨
- ì„œë²„ ì¸¡ ì¼ì‹œì  ì¥ì•  í›„ ì¬ì—°ê²° ì‹¤íŒ¨
- atuin daemon ìì²´ì˜ experimental íŠ¹ì„±ìœ¼ë¡œ ì¸í•œ ë¶ˆì•ˆì •

**ì°¸ê³ **: atuin ê³µì‹ ë¬¸ì„œì—ì„œ daemonì„ "experimental" ê¸°ëŠ¥ìœ¼ë¡œ ë¶„ë¥˜í•˜ê³  ìˆìŒ. maintainerë„ ë¶ˆì•ˆì •í•˜ë‹¤ê³  ì–¸ê¸‰í•œ ì  ìˆìŒ (ì •í™•í•œ ì¶œì²˜ í•„ìš”).

### ë¬¸ì œ 1: Watchdogì´ ì—ëŸ¬ë¥¼ ë¬´ì‹œí•¨

**ì¦ìƒ**: watchdogì´ sync ì‹¤íŒ¨ë¥¼ ê°ì§€í•˜ì§€ ëª»í•¨

**ì›ì¸**: ê¸°ì¡´ ì½”ë“œê°€ ì—ëŸ¬ë¥¼ ë¬´ì‹œ

```bash
# ê¸°ì¡´ ì½”ë“œ
atuin sync 2>/dev/null || echo "Warning: sync command failed"
```

**í•´ê²°**: ì—ëŸ¬ ë¡œê¹… ë° ìƒì„¸ ì¶œë ¥ ì¶”ê°€

```bash
sync_output=$(atuin sync 2>&1)
sync_exit_code=$?
if [[ $sync_exit_code -ne 0 ]]; then
    log_error "Sync failed (exit code: $sync_exit_code)"
    log_error "Sync output: $sync_output"
fi
```

### ë¬¸ì œ 2: ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì™€ daemon ë¬¸ì œ êµ¬ë¶„ ë¶ˆê°€

**ì¦ìƒ**: ë„¤íŠ¸ì›Œí¬ê°€ ì•ˆ ë˜ëŠ”ë° daemonì„ ì¬ì‹œì‘í•˜ë ¤ê³  ì‹œë„

**í•´ê²°**: sync ì‹œë„ ì „ ë„¤íŠ¸ì›Œí¬ í™•ì¸ ì¶”ê°€

```bash
check_network_connectivity() {
    # DNS í™•ì¸
    if ! host "$ATUIN_SYNC_SERVER" >/dev/null 2>&1; then
        log_error "DNS resolution failed"
        return 1
    fi

    # HTTPS ì—°ê²° í™•ì¸
    http_code=$(curl -s -o /dev/null -w "%{http_code}" \
        --connect-timeout 5 "https://$ATUIN_SYNC_SERVER")

    if [[ "$http_code" == "000" ]]; then
        log_error "No response from server"
        return 1
    fi

    return 0
}
```

### ë¬¸ì œ 3: Atuin daemon ë¶ˆì•ˆì •

**ì¦ìƒ**: daemonì´ exit code 1ë¡œ 218ë²ˆ ì¬ì‹œì‘ë¨

```bash
$ launchctl print gui/$(id -u)/com.green.atuin-daemon
runs = 218
last exit code = 1
```

**ì›ì¸ ë¶„ì„**:
- atuin daemonì€ ì•„ì§ experimental ê¸°ëŠ¥
- maintainerë„ ë¶ˆì•ˆì •í•˜ë‹¤ê³  ì–¸ê¸‰
- ì¥ì‹œê°„ ì‹¤í–‰ ì‹œ ì¢€ë¹„ ìƒíƒœë¡œ ì „í™˜

**í•´ê²°**: daemon ë¹„í™œì„±í™”, launchdë¡œ ì£¼ê¸°ì  sync ì‹¤í–‰

```nix
# daemon ë¹„í™œì„±í™” (config.toml)
# daemon = { enabled = true; ... }  # ì£¼ì„ ì²˜ë¦¬

# launchdë¡œ 2ë¶„ë§ˆë‹¤ sync
launchd.agents.atuin-sync = {
  config = {
    ProgramArguments = [ "/bin/bash" "-c" "atuin sync && ..." ];
    StartInterval = 120;
  };
};
```

### ë¬¸ì œ 4: CLI sync (v2)ê°€ last_sync_time ë¯¸ì—…ë°ì´íŠ¸

**ì¦ìƒ**: `atuin sync` ì„±ê³µí•´ë„ `last_sync_time` íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: atuin ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ ê²°ê³¼, sync.records = true (v2) ê²½ë¡œì—ì„œ `save_sync_time()` ë¯¸í˜¸ì¶œ

```rust
// crates/atuin/src/command/client/sync.rs
pub async fn run(...) -> Result<()> {
    if settings.sync.records {
        sync::sync(&settings, &db).await?;  // save_sync_time() ì—†ìŒ!
    } else {
        atuin_client::sync::sync(...).await?;  // save_sync_time() ìˆìŒ
    }
}
```

**í•´ê²°**: launchdì—ì„œ sync ì„±ê³µ í›„ ì§ì ‘ íŒŒì¼ ì—…ë°ì´íŠ¸

```bash
atuin sync && printf '%s' "$(date -u +'%Y-%m-%dT%H:%M:%S.000000Z')" > ~/.local/share/atuin/last_sync_time
```

### ë¬¸ì œ 5: last_sync_time íŒŒì¼ í˜•ì‹ ì˜¤ë¥˜

**ì¦ìƒ**: `atuin doctor`ê°€ "no last sync" ë°˜í™˜

**ì›ì¸**: ì¤„ë°”ê¿ˆ ë¬¸ìê°€ í¬í•¨ë˜ë©´ íŒŒì‹± ì‹¤íŒ¨

```bash
# ì˜ëª»ëœ ë°©ì‹
echo "2026-01-14T02:45:00.000000Z" > last_sync_time  # ì¤„ë°”ê¿ˆ í¬í•¨!

# ì˜¬ë°”ë¥¸ ë°©ì‹
printf '%s' "2026-01-14T02:45:00.000000Z" > last_sync_time  # ì¤„ë°”ê¿ˆ ì—†ìŒ
```

### ë¬¸ì œ 6: launchd ì—ì´ì „íŠ¸ê°€ ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: `StartInterval = 120` ì„¤ì • ì‹œ ì²« intervalì´ ì§€ë‚œ í›„ì—ì•¼ ì‹¤í–‰ë¨

**í•´ê²°**: `RunAtLoad = true` ì¶”ê°€

```nix
launchd.agents.atuin-sync = {
  config = {
    RunAtLoad = true;      # ë¡œë“œ ì‹œ ë°”ë¡œ ì²« ì‹¤í–‰
    StartInterval = 120;   # ì´í›„ 2ë¶„ë§ˆë‹¤
  };
};
```

### êµí›ˆ

1. **ì—ëŸ¬ë¥¼ ë¬´ì‹œí•˜ì§€ ë§ ê²ƒ**
   - `2>/dev/null`ì€ ë””ë²„ê¹…ì„ ë¶ˆê°€ëŠ¥í•˜ê²Œ ë§Œë“¦
   - ì—ëŸ¬ ì¶œë ¥ì„ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡í•˜ëŠ” ê²ƒì´ í•„ìˆ˜

2. **ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ ìš°ì„  í™•ì¸**
   - ì•± ë¬¸ì œì¸ì§€ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì¸ì§€ êµ¬ë¶„ í•„ìš”
   - sync ì‹¤íŒ¨ ì‹œ ë¬´ì¡°ê±´ daemon/ì•± ì¬ì‹œì‘ì´ ì•„ë‹Œ, ë„¤íŠ¸ì›Œí¬ í™•ì¸ ì„ í–‰

3. **experimental ê¸°ëŠ¥ì— ëŒ€í•œ ëŒ€ë¹„**
   - "experimental"ë¡œ í‘œì‹œëœ ê¸°ëŠ¥ì€ ì‹¤ì œë¡œ ë¶ˆì•ˆì •í•  ìˆ˜ ìˆìŒ
   - ëŒ€ì•ˆ(fallback)ì„ ë¯¸ë¦¬ ë§ˆë ¨í•´ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ
   - ì´ë²ˆ ê²½ìš°: daemon ëŒ€ì‹  launchd + CLI sync ì¡°í•©ìœ¼ë¡œ ëŒ€ì²´

4. **ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ì˜ ì¤‘ìš”ì„±**
   - ë¬¸ì„œë§Œìœ¼ë¡œëŠ” ë™ì‘ì„ í™•ì‹ í•  ìˆ˜ ì—†ìŒ
   - `save_sync_time()` ë¯¸í˜¸ì¶œ ê°™ì€ ë¯¸ë¬˜í•œ ì°¨ì´ëŠ” ì†ŒìŠ¤ì½”ë“œì—ì„œë§Œ í™•ì¸ ê°€ëŠ¥
   - ë²„ê·¸ì¸ì§€ ì˜ë„ëœ ë™ì‘ì¸ì§€ íŒë‹¨í•˜ë ¤ë©´ ì†ŒìŠ¤ì½”ë“œ ë¶„ì„ í•„ìˆ˜

5. **íŒŒì¼ í˜•ì‹ì˜ ì—„ê²©í•¨**
   - ì¤„ë°”ê¿ˆ í•˜ë‚˜ê°€ íŒŒì‹± ì‹¤íŒ¨ ìœ ë°œ (`echo` vs `printf '%s'`)
   - ì‹œê°„ í˜•ì‹, íƒ€ì„ì¡´ ë“± ì •í™•íˆ ë§ì¶°ì•¼ í•¨

6. **launchd ë™ì‘ ì´í•´**
   - `StartInterval`ë§Œìœ¼ë¡œëŠ” ì¦‰ì‹œ ì‹¤í–‰ ì•ˆ ë¨
   - `RunAtLoad = true` ì¶”ê°€í•´ì•¼ ë¡œë“œ ì‹œ ì²« ì‹¤í–‰

7. **ì»¤ë°‹ ë©”ì‹œì§€ì™€ íƒ€ì„ë¼ì¸ì˜ ì¤‘ìš”ì„±**
   - fb8de27 ì»¤ë°‹ ë©”ì‹œì§€ì— "1948ë¶„ ë™ê¸°í™” ì§€ì—°"ì´ ê¸°ë¡ë¨
   - ì´ ì •ë³´ë¡œ "daemonì´ ì²˜ìŒë¶€í„° ë¬¸ì œì˜€ë‹¤"ëŠ” ê²ƒì„ ì—­ì¶”ì í•  ìˆ˜ ìˆì—ˆìŒ
   - ë¬¸ì œ ìƒí™©ì„ ì»¤ë°‹ ë©”ì‹œì§€ì— ìƒì„¸íˆ ê¸°ë¡í•˜ëŠ” ê²ƒì´ ë‚˜ì¤‘ì— ë„ì›€ì´ ë¨

### ìµœì¢… ì•„í‚¤í…ì²˜

```
launchd
â”œâ”€â”€ com.green.atuin-sync      # 2ë¶„ë§ˆë‹¤: atuin sync + last_sync_time ì—…ë°ì´íŠ¸
â””â”€â”€ com.green.atuin-watchdog  # 10ë¶„ë§ˆë‹¤: ë„¤íŠ¸ì›Œí¬ í™•ì¸ + ìƒíƒœ ì²´í¬ + ë³µêµ¬ + ì•Œë¦¼
```

**ì™œ ì´ êµ¬ì¡°ì¸ê°€:**
- daemonì€ ë¶ˆì•ˆì • â†’ launchdì˜ `StartInterval`ë¡œ ì£¼ê¸°ì  sync ëŒ€ì²´
- CLI sync (v2)ëŠ” `last_sync_time` ë¯¸ì—…ë°ì´íŠ¸ â†’ launchdì—ì„œ ì§ì ‘ íŒŒì¼ ì—…ë°ì´íŠ¸
- watchdogì€ ìƒíƒœ ì²´í¬ + ë³µêµ¬ ì „ë‹´ (sync ìì²´ëŠ” ë‹´ë‹¹í•˜ì§€ ì•ŠìŒ)

### ë°œê²¬í•œ atuin ë™ì‘ íŠ¹ì„±

> **ì£¼ì˜**: ì•„ë˜ ë‚´ìš©ì´ "ë²„ê·¸"ì¸ì§€ "ì˜ë„ëœ ë™ì‘"ì¸ì§€ëŠ” í™•ì¸ë˜ì§€ ì•ŠìŒ. upstreamì— í™•ì¸ í•„ìš”.

#### 1. sync ê²½ë¡œë³„ save_sync_time() í˜¸ì¶œ ì—¬ë¶€ (ì¤‘ìš”!)

atuinì—ëŠ” ì—¬ëŸ¬ sync ê²½ë¡œê°€ ì¡´ì¬í•˜ë©°, ê°ê° `save_sync_time()` í˜¸ì¶œ ì—¬ë¶€ê°€ ë‹¤ë¦„.

**ì „ì²´ ë¹„êµí‘œ**:

| sync ê²½ë¡œ | save_sync_time() | ì†ŒìŠ¤ì½”ë“œ ìœ„ì¹˜ | íŠ¸ë¦¬ê±° |
|-----------|------------------|---------------|--------|
| CLI `atuin sync` (v2) | âŒ ë¯¸í˜¸ì¶œ | `crates/atuin/src/command/client/sync.rs` | ìˆ˜ë™ ì‹¤í–‰, launchd ë“± |
| CLI `atuin sync` (v1) | âœ… í˜¸ì¶œ | ë™ì¼ íŒŒì¼, v1 ê²½ë¡œ | (ë ˆê±°ì‹œ) |
| history end (auto_sync) | âœ… í˜¸ì¶œ | `crates/atuin/src/command/client/history.rs:460-462` | í„°ë¯¸ë„ ëª…ë ¹ ì‹¤í–‰ í›„ |
| daemon sync | âœ… í˜¸ì¶œ | `atuin-daemon/src/server/sync.rs:85` | daemon ë‚´ë¶€ ìŠ¤ì¼€ì¤„ëŸ¬ |

**í•µì‹¬ ë°œê²¬ (2026-01-14 ì¶”ê°€ ë¶„ì„)**:

ì²˜ìŒì—ëŠ” "CLI sync (v2)ê°€ save_sync_time()ì„ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ”ë‹¤"ëŠ” ê²ƒë§Œ íŒŒì•…í–ˆìœ¼ë‚˜, ì¶”ê°€ ë¶„ì„ ê²°ê³¼ **history endì˜ auto_syncëŠ” save_sync_time()ì„ í˜¸ì¶œí•œë‹¤**ëŠ” ê²ƒì„ ë°œê²¬í•¨.

**ì†ŒìŠ¤ì½”ë“œ ì¦ê±°** (`crates/atuin/src/command/client/history.rs:457-462`):

```rust
if settings.should_sync()? {
    #[cfg(feature = "sync")]
    {
        if settings.sync.records {
            let (_, downloaded) = record::sync::sync(settings, &store).await?;
            Settings::save_sync_time()?;  // <-- ì—¬ê¸°ì„œ í˜¸ì¶œ!

            crate::sync::build(settings, &store, db, Some(&downloaded)).await?;
        } else {
            // v1 ê²½ë¡œ
        }
    }
}
```

**CLI sync (v2)ì™€ì˜ ë¹„êµ** (`crates/atuin/src/command/client/sync.rs`):

```rust
pub async fn run(...) -> Result<()> {
    if settings.sync.records {
        sync::sync(&settings, &db).await?;  // save_sync_time() ì—†ìŒ!
    } else {
        atuin_client::sync::sync(&settings, false, &db).await?;
    }
}
```

**ì‹¤ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼** (2026-01-14 12:19):

```bash
$ cat ~/.local/share/atuin/last_sync_time
2026-01-14T03:18:46.000000Z

$ atuin sync
Uploading 1 records to 019bb5a9bc45768099cfb54cf73beb4a/history
2/0 up/down to record store
Sync complete! 51976 items in history database, force: false

$ cat ~/.local/share/atuin/last_sync_time
2026-01-14T03:18:46.000000Z  # ë³€ê²½ ì—†ìŒ!
```

CLI `atuin sync` ì‹¤í–‰ ì „í›„ë¡œ íŒŒì¼ì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ. ë°˜ë©´, í„°ë¯¸ë„ì—ì„œ ì¼ë°˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ auto_syncê°€ íŠ¸ë¦¬ê±°ë˜ì–´ íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë¨.

**auto_sync ë™ì‘ ë°©ì‹**:

1. í„°ë¯¸ë„ì—ì„œ ëª…ë ¹ ì‹¤í–‰ (ì˜ˆ: `ls`, `git status` ë“±)
2. atuinì´ history end ì²˜ë¦¬
3. `should_sync()` ì²´í¬: ë§ˆì§€ë§‰ sync ì´í›„ `sync_frequency` (ê¸°ë³¸ 1ë¶„) ì§€ë‚¬ëŠ”ê°€?
4. ì¡°ê±´ ì¶©ì¡± ì‹œ sync ì‹¤í–‰ + `save_sync_time()` í˜¸ì¶œ
5. `last_sync_time` íŒŒì¼ ì—…ë°ì´íŠ¸

**`should_sync()` í•¨ìˆ˜** (`crates/atuin-client/src/settings.rs:629-645`):

```rust
pub fn should_sync(&self) -> Result<bool> {
    if !self.auto_sync || !PathBuf::from(self.session_path.as_str()).exists() {
        return Ok(false);
    }

    if self.sync_frequency == "0" {
        return Ok(true);
    }

    match parse_duration(self.sync_frequency.as_str()) {
        Ok(d) => {
            let d = time::Duration::try_from(d)?;
            Ok(OffsetDateTime::now_utc() - Settings::last_sync()? >= d)
        }
        Err(e) => Err(eyre!("failed to check sync: {}", e)),
    }
}
```

**ì‹œì‚¬ì **:

1. **í„°ë¯¸ë„ ì‚¬ìš© ì‹œ**: auto_syncê°€ `sync_frequency` ê°„ê²©ìœ¼ë¡œ sync + save_sync_time() í˜¸ì¶œ
2. **í„°ë¯¸ë„ ë¯¸ì‚¬ìš© ì‹œ**: auto_sync íŠ¸ë¦¬ê±° ì•ˆ ë¨ â†’ launchdì˜ ì£¼ê¸°ì  sync í•„ìš”
3. **launchdì˜ CLI sync**: save_sync_time() ë¯¸í˜¸ì¶œ â†’ ì§ì ‘ íŒŒì¼ ì—…ë°ì´íŠ¸ workaround í•„ìš”

**ê²°ë¡ **:

launchdì—ì„œ `atuin sync` ì‹¤í–‰ í›„ ì§ì ‘ íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” workaroundëŠ”:
- í„°ë¯¸ë„ ì‚¬ìš© ì‹œ: ë¶ˆí•„ìš” (auto_syncê°€ ì²˜ë¦¬)
- í„°ë¯¸ë„ ë¯¸ì‚¬ìš© ì‹œ: í•„ìš” (CLI syncê°€ íŒŒì¼ ë¯¸ì—…ë°ì´íŠ¸)

ë”°ë¼ì„œ í˜„ì¬ ì„¤ì • (launchdì—ì„œ sync + íŒŒì¼ ì—…ë°ì´íŠ¸)ì€ **í„°ë¯¸ë„ ë¯¸ì‚¬ìš© ì‹œë¥¼ ìœ„í•œ ë°±ì—…**ìœ¼ë¡œ ìœ íš¨í•¨.

**ì¶”ì¸¡**: CLI sync (v2)ì—ì„œ save_sync_time() ë¯¸í˜¸ì¶œì€ ë²„ê·¸ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŒ. history end ê²½ë¡œì—ì„œëŠ” í˜¸ì¶œí•˜ë©´ì„œ CLI ê²½ë¡œì—ì„œë§Œ ëˆ„ë½ëœ ê²ƒì€ ì¼ê´€ì„±ì´ ì—†ìŒ.

#### 2. daemon ë¶ˆì•ˆì •

**ê´€ì°°ëœ í˜„ìƒ**:
- launchdì—ì„œ 218ë²ˆ ì¬ì‹œì‘ë¨ (runs = 218)
- exit code 1ë¡œ ë°˜ë³µ ì¢…ë£Œ
- í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤í–‰ ì¤‘ì´ì§€ë§Œ syncë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” "ì¢€ë¹„" ìƒíƒœ ë°œìƒ

**ì¶”ì¸¡ë˜ëŠ” ì›ì¸** (í™•ì¸ë˜ì§€ ì•ŠìŒ):
- experimental ê¸°ëŠ¥ì˜ íŠ¹ì„±
- ë„¤íŠ¸ì›Œí¬/ìŠ¬ë¦½/ì„œë²„ ì¥ì•  ì‹œ ë³µêµ¬ ì‹¤íŒ¨

**atuin ë¬¸ì„œ ì°¸ê³ **: daemonì€ "experimental" ê¸°ëŠ¥ìœ¼ë¡œ ë¶„ë¥˜ë¨.

### í–¥í›„ ê³ ë ¤ì‚¬í•­

1. **atuin upstream ì´ìŠˆ í™•ì¸/ë³´ê³ **
   - CLI sync (v2)ì˜ `save_sync_time()` ë¯¸í˜¸ì¶œì´ ë²„ê·¸ì¸ì§€ í™•ì¸
   - daemon ë¶ˆì•ˆì • ê´€ë ¨ ê¸°ì¡´ ì´ìŠˆê°€ ìˆëŠ”ì§€ í™•ì¸

2. **daemon ì•ˆì •í™” ì‹œ ì¬ê²€í† **
   - atuin ë²„ì „ ì—…ê·¸ë ˆì´ë“œ ì‹œ daemon ì•ˆì •ì„± ì¬í‰ê°€
   - ì•ˆì •í™”ë˜ë©´ daemonìœ¼ë¡œ ë³µê·€ ê°€ëŠ¥ (ë” íš¨ìœ¨ì )

3. **ëª¨ë‹ˆí„°ë§ ë¡œê·¸ ì£¼ê¸°ì  í™•ì¸**
   - `~/.local/share/atuin/watchdog.log` í™•ì¸
   - ìƒˆë¡œìš´ íŒ¨í„´ì˜ ë¬¸ì œ ë°œìƒ ì‹œ ì¡°ê¸° ë°œê²¬

---

## 2026-01-14: Atuin ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ëŒ€ì²­ì†Œ

### ë°°ê²½: ì™œ ì´ë ‡ê²Œ ë³µì¡í•´ì¡Œë‚˜?

ì´ ì„¹ì…˜ì€ atuin ë™ê¸°í™” ë¬¸ì œ í•´ê²° ê³¼ì •ì—ì„œ ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ë³µì¡í•´ì¡Œê³ , ì™œ ëŒ€ì²­ì†Œê°€ í•„ìš”í–ˆëŠ”ì§€ ê¸°ë¡í•©ë‹ˆë‹¤.

### ì „ì²´ íˆìŠ¤í† ë¦¬ (ì‹œê°„ìˆœ)

#### 1ë‹¨ê³„: v1 API ì‹œì ˆ (ë¬¸ì œ ì—†ìŒ)

- atuinì„ ì²˜ìŒ ì‚¬ìš©í•˜ê¸° ì‹œì‘
- v1 APIë¡œ ì •ìƒì ìœ¼ë¡œ ì§‘ <-> íšŒì‚¬ ê°„ íˆìŠ¤í† ë¦¬ ë™ê¸°í™”
- ë³„ë‹¤ë¥¸ ì„¤ì • ì—†ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ë™ì‘

#### 2ë‹¨ê³„: ë™ê¸°í™” ì‹¤íŒ¨ ì‹œì‘ (ì›ì¸ ëª¨ë¦„)

**ì¦ìƒ**:
- ì–´ëŠ ë‚ ë¶€í„° ì§‘ <-> íšŒì‚¬ ë§¥ë¶ ê°„ íˆìŠ¤í† ë¦¬ ê³µìœ ê°€ ì•ˆ ë¨
- `atuin status`ê°€ 404 ì˜¤ë¥˜ ë°˜í™˜

**ë‹¹ì‹œ ì¶”ì¸¡** (ì˜ëª»ë¨):
- "ì„œë²„ ë¬¸ì œì¸ê°€?"
- "ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì¸ê°€?"
- "daemonì„ ì‚¬ìš©í•˜ë©´ í•´ê²°ë ê¹Œ?"

**ì‹¤ì œ ì›ì¸** (ë‚˜ì¤‘ì— íŒŒì•…):
- Atuin ì„œë²„ê°€ v1 APIë¥¼ deprecatedí•˜ê³  v2ë¡œ ì „í™˜
- ë‚´ ì„¤ì •ì— `sync.records = true` (v2 í™œì„±í™”)ê°€ ì—†ì—ˆìŒ
- ë‹¨ìˆœíˆ ì´ í•œ ì¤„ë§Œ ì¶”ê°€í•˜ë©´ í•´ê²°ëì„ ë¬¸ì œ

#### 3ë‹¨ê³„: daemon í™œì„±í™” ì‹œë„ (2026-01-13)

**ì‹œë„í•œ ê²ƒ**:
```nix
daemon = {
  enabled = true;
  sync_frequency = 60;
};
```

**ê²°ê³¼**:
- ì²˜ìŒì—ëŠ” ë™ì‘í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì„
- í•˜ì§€ë§Œ 15ì‹œê°„ í›„ "1948ë¶„ ë™ê¸°í™” ì§€ì—°" ë°œê²¬
- daemonì´ ì²˜ìŒë¶€í„° ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„± ë†’ìŒ

#### 4ë‹¨ê³„: watchdog + ìë™ ë³µêµ¬ ì¶”ê°€ (2026-01-14 ì˜¤ì „)

**ì‹œë„í•œ ê²ƒ**:
- daemon ìƒíƒœ ëª¨ë‹ˆí„°ë§
- ë™ê¸°í™” ì§€ì—° ì‹œ daemon ìë™ ì¬ì‹œì‘
- ë„¤íŠ¸ì›Œí¬ í™•ì¸ ë¡œì§
- ì§€ìˆ˜ ë°±ì˜¤í”„ ì¬ì‹œë„ (5ì´ˆ â†’ 10ì´ˆ â†’ 20ì´ˆ)

**ê²°ê³¼**:
- ì—¬ì „íˆ ë¬¸ì œ í•´ê²° ì•ˆ ë¨
- daemonì´ 218ë²ˆ ì¬ì‹œì‘ë˜ëŠ” ê²ƒ í™•ì¸ (runs = 218, exit code = 1)

#### 5ë‹¨ê³„: daemon í¬ê¸°, CLI syncë¡œ ëŒ€ì²´ (2026-01-14 ì˜¤ì „)

**ì‹œë„í•œ ê²ƒ**:
- daemon ë¹„í™œì„±í™”
- launchdë¡œ 2ë¶„ë§ˆë‹¤ `atuin sync` ì‹¤í–‰
- CLI syncê°€ `last_sync_time`ì„ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠëŠ” ë²„ê·¸ ë°œê²¬
- workaround: sync ì„±ê³µ í›„ ì§ì ‘ íŒŒì¼ ì—…ë°ì´íŠ¸

**ê²°ê³¼**:
- ë™ì‘ì€ í•˜ì§€ë§Œ ì‹œìŠ¤í…œì´ ë§¤ìš° ë³µì¡í•´ì§

#### 6ë‹¨ê³„: í•µì‹¬ ë°œê²¬ - auto_syncì˜ ì¡´ì¬ (2026-01-14 ì˜¤í›„)

**ë°œê²¬**:
- atuinì—ëŠ” ë‚´ì¥ `auto_sync` ê¸°ëŠ¥ì´ ìˆìŒ
- í„°ë¯¸ë„ì—ì„œ ëª…ë ¹ ì‹¤í–‰ ì‹œ `sync_frequency` ê°„ê²©ìœ¼ë¡œ ìë™ sync
- **history endì˜ auto_syncëŠ” `save_sync_time()`ì„ í˜¸ì¶œí•¨!**

**ì†ŒìŠ¤ì½”ë“œ ì¦ê±°** (`crates/atuin/src/command/client/history.rs:460-462`):
```rust
if settings.sync.records {
    let (_, downloaded) = record::sync::sync(settings, &store).await?;
    Settings::save_sync_time()?;  // â† ì—¬ê¸°ì„œ í˜¸ì¶œ!
}
```

**ê¹¨ë‹¬ìŒ**:
- ìš°ë¦¬ê°€ ë§Œë“  launchd syncëŠ” ë¶ˆí•„ìš”í–ˆìŒ
- auto_syncê°€ ì´ë¯¸ ëª¨ë“  ê²ƒì„ ì²˜ë¦¬í•˜ê³  ìˆì—ˆìŒ
- ë‹¨ì§€ `sync.records = true`ë§Œ ì¶”ê°€í•˜ë©´ ëìŒ

#### 7ë‹¨ê³„: ëŒ€ì²­ì†Œ (2026-01-14 ì˜¤í›„)

**ì œê±°í•œ ê²ƒ**:
- `launchd.agents.atuin-sync` (ë¶ˆí•„ìš”)
- watchdogì˜ ë³µêµ¬ ë¡œì§ (auto_syncê°€ ë‹´ë‹¹)
- ë³µì¡í•œ ì„¤ì •ë“¤ (maxRetryCount, initialBackoffSeconds, networkCheckTimeout ë“±)

**ë‚¨ê¸´ ê²ƒ**:
- `sync.records = true` (v2 sync í™œì„±í™”) - **ê·¼ë³¸ í•´ê²°ì±…**
- `auto_sync = true` (ê¸°ë³¸ê°’)
- watchdog (ìƒíƒœ ì²´í¬ + ì•Œë¦¼ë§Œ)
- Hammerspoon ë©”ë‰´ë°” (ìƒíƒœ í‘œì‹œ)

### ì½”ë“œ ë³€í™”ëŸ‰

| íŒŒì¼ | ë³€ê²½ ì „ | ë³€ê²½ í›„ | ê°ì†Œ |
|------|--------|--------|------|
| default.nix | 80ì¤„ | 47ì¤„ | -33ì¤„ |
| atuin-watchdog.sh | 311ì¤„ | 155ì¤„ | -156ì¤„ |
| atuin_menubar.lua | 297ì¤„ | 273ì¤„ | -24ì¤„ |
| **ì´ê³„** | 688ì¤„ | 475ì¤„ | **-213ì¤„ (31% ê°ì†Œ)** |

### ìµœì¢… ì•„í‚¤í…ì²˜ (ë‹¨ìˆœí™”ë¨)

```
auto_sync (atuin ë‚´ì¥)
    â””â”€â”€ í„°ë¯¸ë„ ëª…ë ¹ ì‹¤í–‰ ì‹œ 1ë¶„ ê°„ê²©ìœ¼ë¡œ ìë™ sync

Hammerspoon ë©”ë‰´ë°”
    â””â”€â”€ 1ë¶„ë§ˆë‹¤ ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸

watchdog (launchd, 10ë¶„ë§ˆë‹¤)
    â””â”€â”€ ìƒíƒœ ì²´í¬ + ì§€ì—° ì‹œ ì•Œë¦¼
```

### í•µì‹¬ êµí›ˆ

#### 1. ê·¼ë³¸ ì›ì¸ì„ ì°¾ì•„ë¼

**ì˜ëª»ëœ ì ‘ê·¼**:
- "ë™ê¸°í™”ê°€ ì•ˆ ëœë‹¤" â†’ "daemonì„ ì¨ë³´ì" â†’ "daemonì´ ë¶ˆì•ˆì •í•˜ë‹¤" â†’ "watchdogìœ¼ë¡œ ë³µêµ¬í•˜ì" â†’ "CLI syncë¡œ ëŒ€ì²´í•˜ì"

**ì˜¬ë°”ë¥¸ ì ‘ê·¼**:
- "ë™ê¸°í™”ê°€ ì•ˆ ëœë‹¤" â†’ "ì™œ?" â†’ "v1 APIê°€ deprecatedëë‹¤" â†’ "`sync.records = true` ì¶”ê°€" â†’ ë

**êµí›ˆ**: ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ì„ íŒŒì•…í•˜ì§€ ì•Šê³  ì¦ìƒë§Œ ì¹˜ë£Œí•˜ë©´ ì‹œìŠ¤í…œì´ ë¶ˆí•„ìš”í•˜ê²Œ ë³µì¡í•´ì§„ë‹¤.

#### 2. ê¸°ì¡´ ê¸°ëŠ¥ì„ ë¨¼ì € í™•ì¸í•˜ë¼

**ì˜ëª»ëœ ì ‘ê·¼**:
- "syncê°€ í•„ìš”í•˜ë‹¤" â†’ "launchdë¡œ ì£¼ê¸°ì  syncë¥¼ ë§Œë“¤ì"

**ì˜¬ë°”ë¥¸ ì ‘ê·¼**:
- "syncê°€ í•„ìš”í•˜ë‹¤" â†’ "atuinì— ì´ë¯¸ auto_syncê°€ ìˆë‚˜?" â†’ "ìˆë‹¤!" â†’ "ê·¸ëŸ¼ ê·¸ê±¸ ì“°ì"

**êµí›ˆ**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ì „ì— ê¸°ì¡´ ë„êµ¬ê°€ ì´ë¯¸ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ í™•ì¸í•˜ë¼.

#### 3. ë‹¨ìˆœí•¨ì„ ìœ ì§€í•˜ë¼

**ë³µì¡í–ˆë˜ êµ¬ì¡°**:
```
daemon (ë¶ˆì•ˆì •) + launchd sync (ë°±ì—…) + watchdog (ë³µêµ¬) + ë©”ë‰´ë°”
```

**ë‹¨ìˆœí•´ì§„ êµ¬ì¡°**:
```
auto_sync (ë‚´ì¥) + watchdog (ëª¨ë‹ˆí„°ë§) + ë©”ë‰´ë°”
```

**êµí›ˆ**: ë³µì¡í•œ í•´ê²°ì±…ì€ ëŒ€ê°œ ë¬¸ì œë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í–ˆë‹¤ëŠ” ì‹ í˜¸ë‹¤.

#### 4. ë¬¸ì„œë¥¼ ì½ì–´ë¼

ì´ë²ˆ ë¬¸ì œì˜ í•´ê²°ì±…ì€ atuin ê³µì‹ ë¬¸ì„œì— ìˆì—ˆë‹¤:
- https://docs.atuin.sh/cli/sync-v2/ â†’ `sync.records = true`
- https://docs.atuin.sh/reference/sync/ â†’ auto_sync ì„¤ëª…

**êµí›ˆ**: ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ê³µì‹ ë¬¸ì„œë¥¼ ë¨¼ì € í™•ì¸í•˜ë¼.

#### 5. ì†ŒìŠ¤ì½”ë“œë¥¼ ì½ì–´ë¼

ë¬¸ì„œë§Œìœ¼ë¡œ ë¶ˆì¶©ë¶„í•  ë•Œ:
- CLI sync vs history endì˜ `save_sync_time()` í˜¸ì¶œ ì°¨ì´
- ì´ëŸ° ë¯¸ë¬˜í•œ ë™ì‘ ì°¨ì´ëŠ” ì†ŒìŠ¤ì½”ë“œì—ì„œë§Œ í™•ì¸ ê°€ëŠ¥

**êµí›ˆ**: ë„êµ¬ì˜ ì •í™•í•œ ë™ì‘ì„ ì•Œê³  ì‹¶ë‹¤ë©´ ì†ŒìŠ¤ì½”ë“œë¥¼ ì½ì–´ë¼.

### ì´ ê²½í—˜ì—ì„œ ë°°ìš´ ê²ƒ

1. **v1 â†’ v2 ë§ˆì´ê·¸ë ˆì´ì…˜ ë¬¸ì„œ í™•ì¸**: API ë²„ì „ ë³€ê²½ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ í™•ì¸ í•„ìˆ˜
2. **experimental ê¸°ëŠ¥ ì£¼ì˜**: daemonì€ experimentalë¡œ í‘œì‹œë¨, í”„ë¡œë•ì…˜ì—ì„œ ì£¼ì˜
3. **auto_syncì˜ ì¡´ì¬**: atuinì€ ì´ë¯¸ auto_syncë¥¼ ì œê³µ, ë³„ë„ sync ìŠ¤ì¼€ì¤„ëŸ¬ ë¶ˆí•„ìš”
4. **sync ê²½ë¡œë³„ ë™ì‘ ì°¨ì´**: CLI syncì™€ history endì˜ ë™ì‘ì´ ë‹¤ë¦„ (ë²„ê·¸ì¼ ìˆ˜ ìˆìŒ)

### í–¥í›„ ì°¸ê³ ì‚¬í•­

1. **atuin ì—…ê·¸ë ˆì´ë“œ ì‹œ**: ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ í™•ì¸, íŠ¹íˆ sync ê´€ë ¨ ë³€ê²½ì‚¬í•­
2. **ë™ê¸°í™” ë¬¸ì œ ë°œìƒ ì‹œ**: ë¨¼ì € `sync.records` ì„¤ì • í™•ì¸
3. **daemon ì‚¬ìš© ê³ ë ¤ ì‹œ**: experimental ìƒíƒœ í™•ì¸, ì•ˆì •í™”ë˜ë©´ ì¬ê²€í†  ê°€ëŠ¥
